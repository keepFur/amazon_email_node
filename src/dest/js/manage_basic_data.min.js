"use strict";function _defineProperty(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}layui.use(["util","layer","element","table","form","upload"],function(){var e,n=layui.util,c=layui.layer,i=(layui.element,layui.upload),p=layui.table,m=layui.form,d={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"}};function a(e){var n,i;return v("kbNumberTable",{where:(n=$("#kbNumberSearchForm").serializeArray(),i={},$.each(n,function(e,n){i[n.name]=n.value}),i),page:{curr:1,limit:10}}),!1}function t(e){return c.open({content:'<form class="layui-form layui-form-pane" name="kbNumberCreateForm" lay-filter="kbNumberCreateForm">\n                        <div class="layui-form-item">\n                            <div class="layui-form-item layui-form-text">\n                                <div class="layui-input-block">\n                                    <select name="plant" lay-filter="plant">\n                                        <option value="">选择电商平台</option>\n                                        <option value="TB">淘宝</option>\n                                        <option value="JD">京东</option>\n                                        <option value="PDD">拼多多</option>\n                                    </select> \n                                </div>\n                            </div>\n                            <div class="layui-form-item layui-form-text">\n                                <div class="layui-input-block">\n                                    <select name="company">\n                                       <option value="">选择快递平台</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="layui-form-item layui-form-text">\n                                <label class="layui-form-label">快递单号</label>\n                                <div class="layui-input-block">\n                                   <textarea placeholder="多个使用逗号或者空格隔开" rows="10" name="number" class="layui-textarea"></textarea>\n                                </div>\n                            </div>\n                        </div>\n                    </form>',title:"创建单号",area:["400px"],btn:["创建","取消"],yes:function(a){var e=core.getFormValues($("form[name=kbNumberCreateForm]")),n=g(e);n.isPass?(e.numbers=e.number.split(/\s{1,}|,|，|\n/g).filter(function(e){return!!e}),$.ajax({url:"/api/createKbNumber",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"),c.close(a),v("kbNumberTable")},error:function(e,n,i){c.msg(d.errorMsg)}})):c.msg(n.msg)},success:function(){m.on("select(plant)",function(e){e.value?P(e.value):P("NULL")}),m.render("select")}}),!1}function l(e){var i=p.checkStatus("kbNumberTable").data;if(1===i.length){var n=i[0].plant,a=i[0].number,t=i[0].company;c.open({content:'<form class="layui-form layui-form-pane" lay-filter="kbNumberUpdateForm" name="kbNumberUpdateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-form-item layui-form-text">\n                                    <div class="layui-input-block">\n                                        <select name="plant" lay-filter="plant">\n                                            <option value="">选择电商平台</option>\n                                            <option value="TB">淘宝</option>\n                                            <option value="JD">京东</option>\n                                            <option value="PDD">拼多多</option>\n                                        </select> \n                                    </div>\n                                </div>\n                                <div class="layui-form-item layui-form-text">\n                                    <div class="layui-input-block">\n                                        <select name="company">\n                                            <option value="">选择快递平台</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="ayui-form-item layui-block">\n                                    <label class="layui-form-label">单号</label>\n                                    <div class="layui-input-block">\n                                        <input type="text" name="number" value="'+a+'" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"空包单号信息修改",btn:["确定","取消"],area:["400px","400px"],yes:function(a){var e=core.getFormValues($("form[name=kbNumberUpdateForm]")),n=g(e);e.id=i[0].id,n.isPass?$.ajax({url:"/api/updateKbNumber",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),c.close(a),v("kbNumberTable")},error:function(e,n,i){c.msg(d.errorMsg)}}):c.msg(n.msg)},success:function(){m.on("select(plant)",function(e){return e.value?P(e.value):P("NULL"),!1}),m.render("select"),P(n,function(){m.val("kbNumberUpdateForm",{plant:n,company:t})})}})}else c.msg(d.operatorErrMsg.single);return!1}function s(e){var n=p.checkStatus("kbNumberTable").data,i=e.data.type,a=0===i?"确定禁用吗？":"确定启用吗？";return 1===n.length?c.confirm(a,{btns:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleKbNumber",type:"POST",data:{id:n[0].id,status:i},success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),v("kbNumberTable")},error:function(e,n,i){c.msg(d.netErrMsg)}})}):c.msg(d.operatorErrMsg.single),!1}function o(e){return c.open({content:'<form class="layui-form layui-form-pane" name="kbTypeCreateForm">\n                        <div class="layui-form-item">\n                            <div class="layui-inline">\n                                <label class="layui-form-label">平台</label>\n                                <div class="layui-input-inline">\n                                    <select name="plant">\n                                        <option value="">请选择平台</option>\n                                        <option value="TB">淘宝</option>\n                                        <option value="JD">京东</option>\n                                        <option value="PDD">拼多多</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">名称</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="name" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">简称</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="code" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">价格(分)</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="price"  class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">描述</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="description" class="layui-input">\n                                </div>\n                            </div>\n                        </div>\n                    </form>',title:"创建空包类型",btn:["创建","取消"],yes:function(a){var e=core.getFormValues($("form[name=kbTypeCreateForm]")),n=T(e);n.isPass?$.ajax({url:"/api/createKbType",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"),c.close(a),v("kbTypeTable")},error:function(e,n,i){c.msg(d.errorMsg)}}):c.msg(n.msg)},success:function(){m.render("select")}}),!1}function u(e){var i=p.checkStatus("kbTypeTable").data;if(1===i.length){var n=i[0].plant,a=i[0].name,t=i[0].price,l=i[0].description,s=i[0].code;c.open({content:'<form class="layui-form layui-form-pane" name="kbTypeUpdateForm" lay-filter="kbTypeUpdateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">平台</label>\n                                    <div class="layui-input-inline">\n                                        <select name="plant">\n                                            <option value="">请选择平台</option>\n                                            <option value="TB">淘宝</option>\n                                            <option value="JD">京东</option>\n                                            <option value="PDD">拼多多</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">名称</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="name" value="'+a+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">简称</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="code" value="'+s+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">价格(分)</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="price" value="'+t+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">描述</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="description" value="'+l+'" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"空包类型信息修改",yes:function(a){var e=core.getFormValues($("form[name=kbTypeUpdateForm]")),n=T(e);e.id=i[0].id,n.isPass?$.ajax({url:"/api/updateKbType",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),c.close(a),v("kbTypeTable")},error:function(e,n,i){c.msg(d.errorMsg)}}):c.msg(n.msg)},success:function(){m.render("select"),m.val("kbTypeUpdateForm",{plant:n})},btn:["确定","取消"]})}else c.msg(d.operatorErrMsg.single);return!1}function r(e){var n=p.checkStatus("kbTypeTable").data,i=e.data.type,a=0===i?"确定禁用吗？":"确定启用吗？";return 1===n.length?c.confirm(a,{btns:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleKbType",type:"POST",data:{id:n[0].id,status:i},success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),v("kbTypeTable")},error:function(e,n,i){c.msg(d.netErrMsg)}})}):c.msg(d.operatorErrMsg.single),!1}function y(e){return c.open({content:'<form class="layui-form layui-form-pane" name="taskTypeCreateForm">\n                        <div class="layui-form-item">\n                            <div class="layui-inline">\n                                <label class="layui-form-label">平台</label>\n                                <div class="layui-input-inline">\n                                    <select name="plant">\n                                        <option value="">请选择平台</option>\n                                        <option value="TB">淘宝</option>\n                                        <option value="JD">京东</option>\n                                        <option value="PDD">拼多多</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">类型</label>\n                                <div class="layui-input-inline">\n                                    <select name="isPc">\n                                        <option value="">请选择类型</option>\n                                        <option value="1">PC</option>\n                                        <option value="0">APP</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">关键词</label>\n                                <div class="layui-input-inline">\n                                    <select name="hasKeyword">\n                                        <option value="">请选择是否有关键词</option>\n                                        <option value="1">有</option>\n                                        <option value="0">无</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">名称</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="name" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">进价(分)</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="inPrice" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">售价(分)</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="outPrice" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">猎流码</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="lieliuCode" class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">描述</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="description" class="layui-input">\n                                </div>\n                            </div>\n                        </div>\n                    </form>',title:"创建任务类型",btn:["创建","取消"],yes:function(a){var e=core.getFormValues($("form[name=taskTypeCreateForm]")),n=k(e);n.isPass?$.ajax({url:"/api/createTaskType",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"),c.close(a),v("taskTypeTable")},error:function(e,n,i){c.msg(d.errorMsg)}}):c.msg(n.msg)},success:function(){m.render("select")}}),!1}function b(e){var i=p.checkStatus("taskTypeTable").data;if(1===i.length){var n=i[0].plant,a=i[0].name,t=i[0].description,l=i[0].isPc,s=i[0].lieliuCode,o=i[0].inPrice,u=i[0].outPrice,r=i[0].hasKeyword;c.open({content:'<form class="layui-form layui-form-pane" name="taskTypeUpdateForm" lay-filter="taskTypeUpdateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">平台</label>\n                                    <div class="layui-input-inline">\n                                        <select name="plant">\n                                            <option value="">请选择平台</option>\n                                            <option value="TB">淘宝</option>\n                                            <option value="JD">京东</option>\n                                            <option value="PDD">拼多多</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">类型</label>\n                                    <div class="layui-input-inline">\n                                        <select name="isPc">\n                                            <option value="">请选择类型</option>\n                                            <option value="1">PC</option>\n                                            <option value="0">APP</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">关键词</label>\n                                    <div class="layui-input-inline">\n                                        <select name="hasKeyword">\n                                            <option value="">请选择是否有关键词</option>\n                                            <option value="1">有</option>\n                                            <option value="0">无</option>\n                                        </select>\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">名称</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="name" value="'+a+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">进价(分)</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="inPrice" value="'+o+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">售价(分)</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="outPrice" value="'+u+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">猎流码</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="lieliuCode" value="'+s+'" class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">描述</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="description" value="'+t+'" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"任务类型信息修改",yes:function(a){var e=core.getFormValues($("form[name=taskTypeUpdateForm]")),n=k(e);e.id=i[0].id,n.isPass?$.ajax({url:"/api/updateTaskType",type:"POST",data:e,success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),c.close(a),v("taskTypeTable")},error:function(e,n,i){c.msg(d.errorMsg)}}):c.msg(n.msg)},success:function(){m.render("select"),m.val("taskTypeUpdateForm",{plant:n,isPc:l,hasKeyword:r})},btn:["确定","取消"]})}else c.msg(d.operatorErrMsg.single);return!1}function f(e){var n=p.checkStatus("taskTypeTable").data,i=e.data.type,a=0===i?"确定禁用吗？":"确定启用吗？";return 1===n.length?c.confirm(a,{btns:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleTaskType",type:"POST",data:{id:n[0].id,status:i},success:function(e,n,i){c.msg(e.success?"操作成功":"操作失败"+e.message),v("taskTypeTable")},error:function(e,n,i){c.msg(d.netErrMsg)}})}):c.msg(d.operatorErrMsg.single),!1}function v(e,n){p.reload(e,n)}function g(e){return e?e.plant?e.company?e.number?{isPass:!0,msg:""}:{isPass:!1,msg:"订单号不能为空"}:{isPass:!1,msg:"快递平台不能为空"}:{isPass:!1,msg:"电商平台不能为空"}:{isPass:!1,msg:"参数错误"}}function T(e){return e?e.name?e.plant?e.code?e.description?e.price?{isPass:!0,msg:""}:{isPass:!1,msg:"价格不能为空"}:{isPass:!1,msg:"描述不能为空"}:{isPass:!1,msg:"简称不能为空"}:{isPass:!1,msg:"平台不能为空"}:{isPass:!1,msg:"名称不能为空"}:{isPass:!1,msg:"参数错误"}}function k(e){return e?e.name?e.hasKeyword?e.plant?e.description?e.inPrice?e.outPrice?e.lieliuCode?e.isPc?{isPass:!0,msg:""}:{isPass:!1,msg:"流量类型不能为空"}:{isPass:!1,msg:"列流码不能为空"}:{isPass:!1,msg:"售价不能为空"}:{isPass:!1,msg:"进价不能为空"}:{isPass:!1,msg:"描述不能为空"}:{isPass:!1,msg:"平台不能为空"}:{isPass:!1,msg:"请选择是否有关键词"}:{isPass:!1,msg:"名称不能为空"}:{isPass:!1,msg:"参数错误"}}function P(e,a){$.get("/api/readKbType?status=1&plant="+e,function(e){var n,i;n=e.data.rows,(i=$("select[name=company]")).empty(),i.append('<option value="">请选择快递类型</option>'),$.each(n,function(e,n){i.append('<option value="'+n.code+'" data-price="'+n.price+'" data-plant="'+n.plant+'">'+n.name+"</option>")}),m.render("select"),a&&a()},"json")}p.render((_defineProperty(e={elem:"#kbNumberTable",url:"/api/readKbNumberPage",page:!0,cols:[[{checkbox:!0},{field:"",title:"序号",width:60,templet:function(e){return e.LAY_INDEX}},{title:"单号",field:"number"},{title:"电商平台",field:"plant",templet:function(e){return core.getPlantByCode(e.plant)}},{title:"快递平台",field:"company",templet:function(e){return core.getKbTypeByCode(e.company)}},{title:"创建时间",field:"createdDate",templet:function(e){return n.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"最后修改时间",field:"updateDate",templet:function(e){return e.updateDate?n.toDateString(e.updateDate,"yyyy-MM-dd HH:mm"):""}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(e,"request",{pageName:"offset"}),_defineProperty(e,"response",{statusCode:!0}),_defineProperty(e,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(e,"done",function(e){}),e)),p.render({elem:"#kbTypeTable",url:"/api/readKbType",cols:[[{checkbox:!0},{field:"",title:"序号",width:60,templet:function(e){return e.LAY_INDEX}},{title:"名称",field:"name"},{title:"描述",field:"description"},{title:"平台",field:"plant",templet:function(e){return core.getPlantByCode(e.plant)}},{title:"简称",field:"code"},{title:"价格(元)",field:"price",templet:function(e){return core.fenToYuan(e.price)}},{title:"创建时间",field:"createdDate",templet:function(e){return n.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"最后修改时间",field:"updateDate",templet:function(e){return e.updateDate?n.toDateString(e.updateDate,"yyyy-MM-dd HH:mm"):""}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100],response:{statusCode:!0},parseData:function(e){return{code:e.success,msg:e.msg,data:e.data.rows}},done:function(e){}}),p.render({elem:"#taskTypeTable",url:"/api/readTaskType",cols:[[{checkbox:!0},{field:"",title:"序号",width:60,templet:function(e){return e.LAY_INDEX}},{title:"名称",field:"name"},{title:"描述",field:"description"},{title:"平台",field:"plant",templet:function(e){return core.getPlantByCode(e.plant)}},{title:"进价（积分）",field:"inPrice"},{title:"售价（元）",field:"outPrice",templet:function(e){return core.fenToYuan(e.outPrice)}},{title:"有无关键词",field:"hasKeyword",templet:function(e){return 1===e.hasKeyword?"有":"无"}},{title:"类型",field:"isPc",templet:function(e){return 1===e.isPc?"PC":"APP"}},{title:"列流码",field:"lieliuCode"},{title:"创建时间",field:"createdDate",templet:function(e){return n.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"最后修改时间",field:"updateDate",templet:function(e){return e.updateDate?n.toDateString(e.updateDate,"yyyy-MM-dd HH:mm"):""}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],response:{statusCode:!0},parseData:function(e){return{code:e.success,msg:e.msg,data:e.data.rows}},done:function(e){}}),$("#searchKbNumberBtn").on("click",a),$("#resetKbNumberBtn").on("click",function(){return $("#kbNumberSearchForm")[0].reset(),!1}),$("#importKbNumberBtn").on("click",function(){return!1}),$("#downloadKbNumberTemplateBtn").on("click",function(){var e=document.createElement("a");return e.href="/api/downloadKbNumberTemplate",e.click(),!1}),$("#createKbNumberBtn").on("click",t),$("#updateKbNumberBtn").on("click",l),$("#disabledKbNumberBtn").on("click",{type:0},s),$("#enabledKbNumberBtn").on("click",{type:1},s),$("#createKbTypeBtn").on("click",o),$("#updateKbTypeBtn").on("click",u),$("#disabledKbTypeBtn").on("click",{type:0},r),$("#enabledKbTypeBtn").on("click",{type:1},r),$("#createTaskTypeBtn").on("click",y),$("#updateTaskTypeBtn").on("click",b),$("#disabledTaskTypeBtn").on("click",{type:0},f),$("#enabledTaskTypeBtn").on("click",{type:1},f),m.render("select"),i.render({elem:"#importKbNumberBtn",url:"/api/importKbNumberExcel",done:function(e){e.success?(c.msg("导入成功！！！"),v("kbNumberTable")):c.msg("导入失败："+e.message),c.closeAll("loading")},before:function(e){c.load()},size:4096,accept:"file",exts:"xls|xlsx",error:function(e){c.closeAll("loading"),c.msg("导入失败:服务器异常！！！")}})});