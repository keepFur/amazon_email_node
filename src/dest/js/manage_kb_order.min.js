"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}layui.use(["element","table","layer","util","form","laydate"],function(){var e,t=layui.element,n=layui.table,i=layui.layer,r=layui.util,a=layui.form,l=layui.laydate,d={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"},plants:["","TB","JD","PDD"],tabIndex:0};function s(e){var t,r,a=(t=$("#kbOrderSearchForm").serializeArray(),r={},$.each(t,function(e,t){r[t.name]=t.value}),r);return p($.extend(a,{plant:d.plants[d.tabIndex],page:{curr:1,limit:10}})),!1}function u(e){return $(".flyer-layout-tree .flyer-layout-link[data-hash=kb_purchase]").click(),!1}function c(){return i.msg("123"),!1}function o(e){var r=n.checkStatus("taskTable").data;return 1===r.length?i.confirm("确定取消空包订单吗？状态会稍微有点延时，谢谢谅解！！取消之后积分将不退回账户中，请谨慎操作！！",{title:"询问框",btn:["确定","取消"]},function(e,t){APIUtil.cancelKbOrder(r[0].taskOrderNumber,function(e){"1"===e.data.status?(i.msg("操作成功!"),$.ajax({url:"/api/toggleKbOrder",type:"POST",data:{id:r[0].id,status:3},success:function(e,t,r){p()},error:function(e,t,r){i.msg(d.netErrMsg)}})):i.msg(e.data.tips)})}):i.msg(d.operatorErrMsg.single),!1}function f(e){var r=n.checkStatus("taskTable").data,a=e.data.type,t=0===a?"确定暂停吗？状态会稍微有点延时，谢谢谅解！！":"确定恢复吗？状态会稍微有点延时，谢谢谅解！！";return 1===r.length?i.confirm(t,{title:"询问框",btn:["确定","取消"]},function(e,t){APIUtil.pauseAndResumeKbOrder(r[0].taskOrderNumber,a,function(e){"1"===e.data.status?(i.msg("操作成功！"),$.ajax({url:"/api/toggleKbOrder",type:"POST",data:{id:r[0].id,status:a?1:2},success:function(e,t,r){p()},error:function(e,t,r){i.msg(d.netErrMsg)}})):i.msg("操作失败："+e.data.tips)})}):i.msg(d.operatorErrMsg.single),!1}function p(e){n.reload("kbOrderTable",{where:e})}a.render("select"),l.render({elem:"#createdDateStart",range:!0}),n.render((_defineProperty(e={elem:"#kbOrderTable",url:"/api/readKbOrderPage",page:!0,cols:[[{checkbox:!0,fixed:"left"},{field:"number",title:"订单号",width:220},{field:"kbNumber",title:"快递单号",width:220},{field:"kbCompany",title:"快递公司/平台",width:150,templet:function(e){return e.kbCompany+"/"+e.plant}},{field:"addressFrom",title:"发件人信息",width:300},{field:"addressTo",title:"收件人信息",width:300},{field:"remark",title:"备注",width:150},{field:"createdDate",title:"创建时间",width:200,templet:function(e){return r.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{field:"status",title:"状态",width:150,fixed:"right",align:"center",templet:function(e){return'<span class="layui-text-'+(1==e.status?"green":"pink")+'">'+["","处理中","已暂停","已取消","已完成"][e.status]+"</span>"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(e,"request",{pageName:"offset"}),_defineProperty(e,"response",{statusCode:!0}),_defineProperty(e,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(e,"done",function(e){var t,r;t=e.data.length,r=e.count,$("#currentKbOrderMountSpan").text(t),$("#kbOrderMountSpan").text(r)}),e)),t.on("tab(manageKbOrder)",function(e){e.index!==d.tabIndex&&(p({plant:d.plants[e.index]}),d.tabIndex=e.index)}),$("#searchBtn").on("click",s),$("#resetBtn").on("click",function(){return $("#kbOrderSearchForm")[0].reset(),!1}),$("#createKbOrderBtn").on("click",u),$("#exportKbOrderBtn").on("click",c),$("#cancelKbOrderBtn").on("click",o),$("#disabledKbOrderBtn").on("click",{type:0},f),$("#enabledKbOrderBtn").on("click",{type:1},f)});