"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.use(["util","layer","element","table"],function(){var e,t=layui.util,i=layui.layer,l=(layui.element,layui.table),s={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"}};function a(e){return i.open({content:'<form class="layui-form layui-form-pane" name="plantCreateForm">\n                        <div class="layui-form-item">\n                            <div class="layui-inline">\n                                <label class="layui-form-label">名称</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="plantName"  class="layui-input">\n                                </div>\n                            </div>\n                            <div class="layui-inline">\n                                <label class="layui-form-label">平台描述</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="description" class="layui-input">\n                                </div>\n                            </div>\n                        </div>\n                    </form>',title:"创建平台",btn:["创建","取消"],yes:function(n){var e=core.getFormValues($("form[name=plantCreateForm]")),t=o(e);t.isPass?$.ajax({url:"/api/createPlant",type:"POST",data:e,success:function(e,t,a){i.msg(e.success?"操作成功":"操作失败"),i.close(n),u()},error:function(e,t,a){i.msg(s.errorMsg)}}):i.msg(t.msg)}}),!1}function n(e){var a=l.checkStatus("plantTable").data;if(1===a.length){var t=a[0].plantName,n=a[0].description;i.open({content:'<form class="layui-form layui-form-pane" name="plantUpdateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">名称</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="plantName" value="'+t+'"  class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">平台描述</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="description" value="'+n+'" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"平台信息修改",yes:function(n){var e=core.getFormValues($("form[name=plantUpdateForm]")),t=o(e);e.id=a[0].id,t.isPass?$.ajax({url:"/api/updatePlant",type:"POST",data:e,success:function(e,t,a){i.msg(e.success?"操作成功":"操作失败"+e.message),i.close(n),u()},error:function(e,t,a){i.msg(s.errorMsg)}}):i.msg(t.msg)},btns:["确定","取消"]})}else i.msg(s.operatorErrMsg.single);return!1}function r(e){var t=l.checkStatus("plantTable").data,a=e.data.type,n=0===a?"确定禁用吗？":"确定启用吗？";return 1===t.length?i.confirm(n,{btns:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/togglePlant",type:"POST",data:{id:t[0].id,status:a},success:function(e,t,a){i.msg(e.success?"操作成功":"操作失败"+e.message),u()},error:function(e,t,a){i.msg(s.netErrMsg)}})}):i.msg(s.operatorErrMsg.single),!1}function u(e){l.reload("plantTable",e)}function o(e){return e?e.plantName?e.description?{isPass:!0,msg:""}:{isPass:!1,msg:"平台描述不能为空"}:{isPass:!1,msg:"平台名称不能为空"}:{isPass:!1,msg:"参数错误"}}l.render((_defineProperty(e={elem:"#plantTable",url:"/api/readPlantPage",page:!0,cols:[[{checkbox:!0},{title:"平台名称",field:"plantName"},{title:"描述",field:"description"},{title:"创建时间",field:"createdDate",templet:function(e){return t.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"最后修改时间",field:"updateDate",templet:function(e){return e.updateDate?t.toDateString(e.updateDate,"yyyy-MM-dd HH:mm"):""}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(e,"request",{pageName:"offset"}),_defineProperty(e,"response",{statusCode:!0}),_defineProperty(e,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(e,"done",function(e){var t,a;t=e.data.length,a=e.count,$("#currentPlantMountSpan").text(t),$("#plantMountSpan").text(a)}),e)),$("#createPlantBtn").on("click",a),$("#updatePlantBtn").on("click",n),$("#disabledPlantBtn").on("click",{type:0},r),$("#enabledPlantBtn").on("click",{type:1},r)});