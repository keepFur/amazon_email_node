"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}layui.use(["util","layer","element","table"],function(){var e,t=layui.util,l=layui.layer,a=(layui.element,layui.table),s={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"}};function n(e){return l.open({content:'<form class="layui-form layui-form-pane" name="noticeCreateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">标题</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="noticeTitle"  class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">内容</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="noticeContent" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"创建通知",btn:["创建","取消"],yes:function(i,e){var t=core.getFormValues($("form[name=noticeCreateForm]")),n=c(t),a=e.find(".layui-layer-btn0");n.isPass?$.ajax({url:"/api/createNotice",type:"POST",data:t,beforeSend:function(){$.unlockBtn(a,!0,"创建中")},success:function(e,t,n){l.msg(e.success?"操作成功":"操作失败"),l.close(i),r()},error:function(e,t,n){l.msg(s.errorMsg)},complete:function(){$.unlockBtn(a,"创建")}}):l.msg(n.msg)}}),!1}function i(e){var n=a.checkStatus("noticeTable").data;if(1===n.length){var t=n[0].noticeTitle,i=n[0].noticeContent;l.open({content:'<form class="layui-form layui-form-pane" name="noticeUpdateForm">\n                            <div class="layui-form-item">\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">标题</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="noticeTitle" value="'+t+'"  class="layui-input">\n                                    </div>\n                                </div>\n                                <div class="layui-inline">\n                                    <label class="layui-form-label">内容</label>\n                                    <div class="layui-input-inline">\n                                        <input type="text" name="noticeContent" value="'+i+'" class="layui-input">\n                                    </div>\n                                </div>\n                            </div>\n                        </form>',title:"通知信息修改",btn:["确定","取消"],yes:function(i){var e=core.getFormValues($("form[name=noticeUpdateForm]")),t=c(e);e.id=n[0].id,t.isPass?$.ajax({url:"/api/updateNotice",type:"POST",data:e,success:function(e,t,n){l.msg(e.success?"操作成功":"操作失败"+e.message),l.close(i),r()},error:function(e,t,n){l.msg(s.errorMsg)}}):l.msg(t.msg)}})}else l.msg(s.operatorErrMsg.single);return!1}function o(e){var t=a.checkStatus("noticeTable").data,n=e.data.type,i=0===n?"确定禁用吗？":"确定启用吗？";return 1===t.length?l.confirm(i,{btn:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleNotice",type:"POST",data:{id:t[0].id,status:n},success:function(e,t,n){l.msg(e.success?"操作成功":"操作失败"+e.message),r()},error:function(e,t,n){l.msg(s.netErrMsg)}})}):l.msg(s.operatorErrMsg.single),!1}function r(e){a.reload("noticeTable",e)}function c(e){return e?e.noticeTitle?e.noticeContent?{isPass:!0,msg:""}:{isPass:!1,msg:"通知内容不能为空"}:{isPass:!1,msg:"通知标题不能为空"}:{isPass:!1,msg:"参数错误"}}a.render((_defineProperty(e={elem:"#noticeTable",url:"/api/readNoticePage",page:!0,cols:[[{checkbox:!0},{field:"",title:"序号",width:60,templet:function(e){return e.LAY_INDEX}},{title:"标题",field:"noticeTitle"},{title:"内容",field:"noticeContent"},{title:"创建时间",field:"createdDate",templet:function(e){return t.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"最后修改时间",field:"updateDate",templet:function(e){return e.updateDate?t.toDateString(e.updateDate,"yyyy-MM-dd HH:mm"):""}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(e,"request",{pageName:"offset"}),_defineProperty(e,"response",{statusCode:!0}),_defineProperty(e,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(e,"done",function(e){}),e)),$("#createNoticeBtn").on("click",n),$("#updateNoticeBtn").on("click",i),$("#disabledNoticeBtn").on("click",{type:0},o),$("#enabledNoticeBtn").on("click",{type:1},o)});