"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.use(["util","layer","element","table","form"],function(){var a=layui.util,r=layui.layer,n=layui.element,c=layui.table,i=layui.form,d={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"},currentTabIndex:0};function e(){var e=$.trim($("select[name=titleCre]").val()),t=$.trim($("textarea[name=contentCre]").val());return e&&t?$.ajax({url:"/api/createAdviceFeedback",type:"POST",data:{title:e,content:a.escape(t)},success:function(e){e.success?(r.msg("操作成功"),$("select[name=titleCre]").val(""),$("textarea[name=contentCre]").val(""),i.render("select"),n.tabChange("adviceFeedback","adviceFeedbackList"),d.currentTabIndex=1,s()):r.msg("操作失败："+e.message)},error:function(){r.msg(d.netErrMsg)}}):r.msg("标题和内容不能为空"),!1}function t(e){var t,a;return s({where:(t=$("#feedbackSearchForm").serializeArray(),a={},$.each(t,function(e,t){a[t.name]=t.value}),a),page:{curr:1,limit:10}}),!1}function l(e){var t=c.checkStatus("adviceFeedbackTable").data,a=e.data.type,n=0===a?"确定禁用吗？":"确定启用吗？";return 1===t.length?r.confirm(n,{btn:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleAdviceFeedback",type:"POST",data:{id:t[0].id,status:a},success:function(e,t,a){r.msg(e.success?"操作成功":"操作失败"+e.message),s()},error:function(e,t,a){r.msg(d.netErrMsg)}})}):r.msg(d.operatorErrMsg.single),!1}function s(e){c.reload("adviceFeedbackTable",e)}i.render("select"),n.on("tab(adviceFeedback)",function(e){var t;e.index!==d.currentTabIndex&&1===e.index&&(c.render((_defineProperty(t={elem:"#adviceFeedbackTable",url:"/api/readAdviceFeedbackPage",page:!0,cols:[[{checkbox:!0},{title:"分类",field:"title"},{title:"内容",field:"content"},{title:"创建时间",field:"createdDate",templet:function(e){return a.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(t,"request",{pageName:"offset"}),_defineProperty(t,"response",{statusCode:!0}),_defineProperty(t,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(t,"done",function(e){var t,a;t=e.data.length,a=e.count,$("#currentAdviceFeedbackMountSpan").text(t),$("#adviceFeedbackMountSpan").text(a)}),t)),d.currentTabIndex=e.index)}),$("#createAdviceFeedbackBtn").on("click",e),$("#searchBtn").on("click",t),$("#resetBtn").on("click",function(){return $("#feedbackSearchForm")[0].reset(),!1}),$("#disabledAdviceFeedbackBtn").on("click",{type:0},l),$("#enabledAdviceFeedbackBtn").on("click",{type:1},l)});