"use strict";function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}layui.use(["util","layer","element","table","form"],function(){var r=layui.util,c=layui.layer,i=layui.element,l=layui.table,d=layui.form,o={netErrMsg:"系统已退出登录，请登录系统重试",operatorErrMsg:{single:"请选择一条数据操作",batch:"请至少选择一条数据操作"},currentTabIndex:0};function e(e){var t=$.trim($("select[name=titleCre]").val()),a=$.trim($("textarea[name=contentCre]").val()),n=$(e.target);return t&&a?$.ajax({url:"/api/createAdviceFeedback",type:"POST",data:{title:t,content:r.escape(a)},beforeSend:function(){$.lockedBtn(n,!0,"提交中")},success:function(e){e.success?(c.msg("操作成功"),$("select[name=titleCre]").val(""),$("textarea[name=contentCre]").val(""),d.render("select"),i.tabChange("adviceFeedback","adviceFeedbackList"),o.currentTabIndex=1,u()):c.msg("操作失败："+e.message)},error:function(){c.msg(o.netErrMsg)},complete:function(){$.unlockBtn(n,'<i class="layui-icon layui-icon-release"></i>提交反馈')}}):c.msg("标题和内容不能为空"),!1}function t(e){var t,a;return u({where:(t=$("#feedbackSearchForm").serializeArray(),a={},$.each(t,function(e,t){a[t.name]=t.value}),a),page:{curr:1,limit:10}}),!1}function a(e){var t=l.checkStatus("adviceFeedbackTable").data,a=e.data.type,n=0===a?"确定禁用吗？":"确定启用吗？";return 1===t.length?c.confirm(n,{btn:["确定","取消"],title:"询问框"},function(){$.ajax({url:"/api/toggleAdviceFeedback",type:"POST",data:{id:t[0].id,status:a},success:function(e,t,a){c.msg(e.success?"操作成功":"操作失败"+e.message),u()},error:function(e,t,a){c.msg(o.netErrMsg)}})}):c.msg(o.operatorErrMsg.single),!1}function u(e){l.reload("adviceFeedbackTable",e)}d.render("select"),i.on("tab(adviceFeedback)",function(e){var t;e.index!==o.currentTabIndex&&1===e.index&&(l.render((_defineProperty(t={elem:"#adviceFeedbackTable",url:"/api/readAdviceFeedbackPage",page:!0,cols:[[{checkbox:!0},{field:"",title:"序号",width:60,templet:function(e){return e.LAY_INDEX}},{title:"分类",field:"title"},{title:"内容",field:"content"},{title:"创建时间",field:"createdDate",templet:function(e){return r.toDateString(e.createdDate,"yyyy-MM-dd HH:mm")}},{title:"状态",field:"status",templet:function(e){return 1===e.status?"启用":"停用"}}]],limits:[10,20,50,100]},"page",{theme:"#1E9FFF",layout:["prev","page","next","skip","count","limit"]}),_defineProperty(t,"request",{pageName:"offset"}),_defineProperty(t,"response",{statusCode:!0}),_defineProperty(t,"parseData",function(e){return{code:e.success,msg:e.msg,count:e.data.total,data:e.data.rows}}),_defineProperty(t,"done",function(e){var t,a;t=e.data.length,a=e.count,$("#currentAdviceFeedbackMountSpan").text(t),$("#adviceFeedbackMountSpan").text(a)}),t)),o.currentTabIndex=e.index)}),$("#createAdviceFeedbackBtn").on("click",e),$("#searchBtn").on("click",t),$("#resetBtn").on("click",function(){return $("#feedbackSearchForm")[0].reset(),!1}),$("#disabledAdviceFeedbackBtn").on("click",{type:0},a),$("#enabledAdviceFeedbackBtn").on("click",{type:1},a)});