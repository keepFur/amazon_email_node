"use strict";!function(t,e,i){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("The plug-in needs to be on the support document rendering environment.");if(!e)throw new Error("The plug-in needs to be on the support jQuery rendering environment.");return i(t)}:i(t,e)}("undefined"!=typeof window?window:this,jQuery,function(t,e,i){"use strick";var n=function(){this.vision="0.1.3"},s=t,a=Array.prototype.slice,r=s.location,o=n.fn=n.prototype={format:function(){var t=a.call(arguments),e=t.length;if(e>0){for(var i=1,n=t[0];i<e;i++)n=n.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return n}return this},formatDate:function(t,e){return"string"!=typeof t?(flyer.log("error","format is not defined."),!1):(e=this.getDate(e),t.replace(/yyyy/gi,e.year).replace(/mm/,this.fullTime(e.month)).replace(/dd/gi,this.fullTime(e.day)).replace(/hh/gi,this.fullTime(e.hours)).replace(/MM/,this.fullTime(e.minutes)).replace(/ss/gi,this.fullTime(e.seconds)))},getDate:function(t){return t=this.isString(t)?new Date(t):t||new Date,{year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds()}},fullTime:function(t){return t>=10?t:"0"+t},getQueryString:function(e){var i=new RegExp(e+"=([^&|#?]+)"),n=r.href.substring(r.href.indexOf("?")+1).match(i);return null!==n?t.unescape(n[1]):null},escapeHTML:function(t){return"string"==typeof t&&t.length>0?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>"):t},unescapeHTML:function(t){return"string"==typeof t&&t.length>0?t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/<br\/>/g,"\n"):t},today:function(){return(new Date).toISOString().replace(/T.+/,"")},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},stop:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getFnName:function(t){return/^[\s\(]*function(?:\s+([\w$_][\w\d$_]*))?\(/.exec(t.toString())[1]||""},isEmpty:function(t){return!([null,"undefined",void 0,"N/A","0",0,"null",!1,"false"].indexOf(t)>0)},isObject:function(t){return"object"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:function(t){return t instanceof Array},isString:function(t){return"string"==typeof t},isjQuery:function(t){return t instanceof jQuery},isUndefined:function(t){return void 0===t},log:function(t,e){var i=a.call(arguments);1===i.length?(e=t,console.log(e)):i.length>1&&console[t](e)}};o.extend=function(t,e){o[t]=e},o.define=function(t,e){var i,n={};if(o.isObject(t)?e=t:o.isFunction(t)&&(e=t),o.isFunction(e)&&(o.exports[t]=o.exports[t]||{},e=e.call(this,o.exports[t],o.exports)),o.isString(t)){for(i in e)n[i]=e[i];this[t]=n}else for(i in e)this[i]=e[i];return this},o.exports={},t.flyer=new n}),function(t,e){for(var i in e)!function(t,i){i.fn[t]=function(i){return this.each(function(){return e[t](this,i)})}}(i,t)}(jQuery,flyer),flyer.extend("codes",function(t,e){var i=function(t,e){var i=this;t.length>1?t.each(function(){i.init($(this),e)}):i.init(t,e)};return i.DEFAULTS={tagName:"pre",title:"Code",height:"auto",encode:!0,about:!0},i.prototype={init:function(t,e){this[0]=t,this.options=$.extend(!0,{},i.DEFAULTS,e),this[0].replaceWith(this.template())},template:function(){return["<"+this.options.tagName+' class="codes">',"<h1>",this.options.title,this.options.about?'<a href="#">flyer.code</a>':"","</h1>","<ol>",this.adornContent(),"</ol>","</"+this.options.tagName+">"].join("")},adornContent:function(){for(var t=this[0].html(),e=[],i=0,n=(t=t?t.split("\n"):"").length;i<n;i++)this.options.encode&&(t[i]=flyer.escapeHTML(t[i])),e.push("<li>"+t[i]+"</li>");return e.join("")}},new i(t,e)}),flyer.extend("combobox",function(t,e){var i=["flyer-combobox","flyer-combobox-contents","filter-options","fa-angle-down","flyer-combobox-items","flyer-combobox-search","fa-search","selected","open","fa-angle-down","fa-angle-up","flyer-disabled"],n=(document.body,document,location,null),s=(window,function(t,e){return this.init(t,e)});return s.DEFAULTS={isMulti:!0,disabled:!1,allowSearch:!0,multipleSeparator:";",fieldKey:"value",required:!0,name:"comboBox",fieldValue:"text",fieldValuePY:"valuePY",fieldValuePY:"",placeholder:"placeholder",searchPlaceholder:"搜索内容...",url:"",data:[],selectAll:!0,allowSelectAll:!0,allText:"All",allValue:"-1",defaultValue:"",fnDataProcessing:function(){this.data=this.data.rows},fnSelected:function(){return!1},fnBeforeSelected:function(){},fnAfterSelected:function(){}},s.prototype={init:function(t,e){this.options=$.extend(!0,{},s.DEFAULTS,e),this.selector=t,this[0]=$(t),this._data={},this._filterData=[],this.requestData()},template:function(){var t=this.options,e=this,n=['<div class="flyer-combobox">','<div class="flyer-combobox-contents">','<input type="text" class="filter-options '+(!0===t.disabled?i[11]:"")+'" name="'+t.name+'" required="'+t.required+'" placeholder='+t.placeholder+' readonly="readonly" /><i class="fa fa-angle-down"></i>',"</div>",'<div class="flyer-combobox-items">',t.allowSearch?'<div class="flyer-combobox-search"><input placeholder="'+t.searchPlaceholder+'" type="text"><i class="fa fa-search"></i></div>':"","<ul>",e.allowAllItem()?"<li data-index='-1' data-key='"+t.allValue+"' data-value='"+window.escape(t.allText)+"'><div>"+t.allText+"</div></li>":"",e.readerItems(),"</ul>","</div>","</div>"];e.isSelectHtml()?(this[0]=this[0].parent(),this[0].append(n.join(""))):this[0].html(n.join("")),this.$itemContainer=this[0].find("."+i[4]),this.$contents=this[0].find("."+i[1]),this.$items=this.$itemContainer.find("li"),this.$search=this[0].find("."+i[5]),this.$filterOptions=this.$contents.find("."+i[2]).eq(0),this.initDefaultValue()},readerItems:function(){for(var t=[],e=this.options,i=this._filterData.length>0?this._filterData:e.data,n=0,s=i.length;n<s;n++)t.push("<li data-index="+n+" data-key="+i[n][e.fieldKey]+" data-value="+window.escape(i[n][e.fieldValue])+"><div>"+i[n][e.fieldValue]+"</div></li>");return t.join("")},requestData:function(){var t=this,e=this.options;0===(this._filterData.length>0?this._filterData:e.data).length&&e.url.length>0?$.getJSON(this.options.url,function(i){t.options.data=i,e.fnDataProcessing(),t.template(),t.initEvents()}):this.isSelectHtml()?(t.readHtmlToData(),t.template(),t.initEvents()):(t.template(),t.initEvents())},isSelectHtml:function(){return"SELECT"===this[0].prop("tagName")},readHtmlToData:function(){var t=this[0].get(0),e=t.children;if(t){t.style.display="none";for(var i=0,n=e.length;i<n;i++){for(var s={},a=0,r=e[i].attributes,o=r.length;a<o;a++)r[a].name.indexOf("data-")>-1&&(s[r[a].name.replace("data-","")]=r[a].value);s[this.options.fieldValue]=e[i].text,this.options.data.push(s)}}},initEvents:function(){var t=this,e=t.options;if(!0===e.disabled)return!1;t.$contents.off("click").on("click",function(e){t.$itemContainer.hasClass(i[8])?t.hideItems.call(t):($("."+i[4]).removeClass(i[8]),t.$itemContainer.addClass(i[8]),t.$contents.find("i").removeClass(i[9]).addClass(i[10])),flyer.stop(e)}),t.$search.find("input").off("keyup").on("keyup",function(e){var i=this;n&&clearTimeout(n),n=setTimeout(function(){t.filterData(i.value)},500)}),t.$items.each(function(){$(this).off("click").on("click",function(n){var s=$(this),a=!!s.hasClass(i[7]),r={fieldKey:s.data("key"),fieldValue:window.unescape(s.data("value"))};"-1"==r.fieldKey&&r.fieldValue==e.allValue?t.empty():t.unselectAll(),t.showSelectedItem(r,a),e.fnSelected.call(t,r,this,t._data),e.isMulti||(t.hideItems.call(t),t.$items.removeClass(i[7])),a?s.removeClass(i[7]):s.addClass(i[7]),t.allowAllItem()&&t.checkSelectAll(),flyer.stop(n)})}),$(document).on("click",function(e){$(e.target.parentElement).hasClass(i[5])||(t.hideItems(),flyer.stop(e))})},allowAllItem:function(){var t=this.options;return t.selectAll&&t.isMulti&&t.data.length>1},showSelectedItem:function(t,e){var i=this.options,n=this.$filterOptions.data("key")||"",s=this.$filterOptions.val()||"";i.isMulti?e?(n=String(n).replace(t.fieldKey+i.multipleSeparator,""),s=s.replace(t.fieldValue+i.multipleSeparator,"")):(n=String(n)+t.fieldKey+i.multipleSeparator,s=s+t.fieldValue+i.multipleSeparator):(n=t.fieldKey,s=t.fieldValue),this.$filterOptions.val(s),this.$filterOptions.data("key",n),this._data={fieldKey:n,fieldValue:s}},selectAllItems:function(t){var e=this,n=(this.options,$(t));"select"===n.attr("all")?(this.$items.removeClass(i[7]),n.attr("all","unselect"),e.empty()):(this.$items.each(function(){var t=$(this),n={fieldKey:t.data("key"),fieldValue:window.unescape(t.data("value"))};t.addClass(i[7]),"-1"!==n.fieldKey&&e.showSelectedItem(n)}),n.attr("all","select"))},unselectAll:function(){var t=this.$itemContainer.find("[data-index='-1']");t.hasClass(i[7])&&(t.removeClass(i[7]),t.attr("all","select"),this.empty())},checkSelectAll:function(){var t=this.$itemContainer.find("."+i[7]).length,e=this.$itemContainer.find("[data-index='-1']");t===this.options.data.length&&(this.empty(),e.click())},hideItems:function(){this.$itemContainer.removeClass(i[8]),this.$contents.find("i").removeClass(i[10]).addClass(i[9])},filterData:function(t){var e=this,i=this.options.data.filter(function(i){return i[e.options.fieldValuePY||e.options.fieldValue].toLowerCase().indexOf(t.toLowerCase())>=0});e._filterData=i,e.$itemContainer.find("ul").remove(),e.$itemContainer.append("<ul>"+e.readerItems()+"</ul>"),e.$items=this.$itemContainer.find("li"),e.initEvents()},getSelectedData:function(){return this._data},getSelectedValue:function(){return this.clearLastSeparator(this._data.fieldKey)},getSelectedText:function(){return this.clearLastSeparator(this._data.fieldValue)},clearLastSeparator:function(t){var e=(t=String(t)).lastIndexOf(this.options.multipleSeparator);return e+1===t.length?t.substring(0,e):t},setValue:function(t){var e=this.$itemContainer.find("[data-key='"+t.fieldKey+"']");this._data={fieldKey:t.fieldKey,fieldValue:t.fieldValue||window.unescape(e.data("value"))},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),e.addClass(i[7])},setValues:function(t){for(var e="",n="",s=this.options,a=0,r=t.length;a<r;a++){var o=this.$itemContainer.find("[data-key='"+t[a].fieldKey+"']");e=e+t[a].fieldKey+s.multipleSeparator,n=n+(t[a].fieldValue||window.unescape(o.data("value")))+s.multipleSeparator,o.addClass(i[7])}this._data={fieldKey:e,fieldValue:n},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue())},empty:function(){this._data={fieldKey:"",fieldValue:""},this.options.defaultValue="",this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),this.$items.removeClass(i[7])},initDefaultValue:function(){var t=this.options.defaultValue;flyer.isString(t)&&t.length>0&&this.setValue({fieldKey:t})},setData:function(t){this.options.data=t},reload:function(){this.requestData(),this.initDefaultValue()}},new s(t,e)}),flyer.define("cookie",function(){function t(t){return"string"==typeof t}return{set:function(e,i){if(t(e)){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+window.escape(i)+";expires="+n.toGMTString()}},get:function(e){if(t(e)){var i,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(i=document.cookie.match(n))?i[2]:null}},remove:function(e){if(t(e)){var i=new Date;i.setTime(i.getTime()-1);var n=this.get(e);null!==n&&(document.cookie=e+"="+n+";expires="+i.toGMTString())}}}}),flyer.extend("date",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={minDate:"1977-01-01",maxDate:"2099-12-31",startDate:new Date,isSure:!0,isClear:!0,isToday:!0,isTime:!0,festival:!0,format:"yyyy-mm-dd HH:MM:SS",isPrecision:!1,click:function(){return!1},choose:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=this.isJQuery(t)?t:$(t),this._date=this.getYMD(this.selector.val().replace(/-/gi,"/")),this.hasDirtyElm(),this.initEvent()},hasDirtyElm:function(){var t=$("#flyer-date-"+this.selector.attr("id"));t.length>0&&t.remove()},refresh:function(){this.template(),this.events(),this.isPickerBtnStatus()},i18n:{},template:function(){var t=this._date,e=this.options,i=['<div class="flyer-date" id="flyer-date-'+this.selector.attr("id")+'">','<div class="flyer-date-header">','<div class="flyer-date-year">','<button class="prev"></button>','<input type="text" class="flyer-year" value="'+t.year+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-yearMore">','<div class="prev-more"></div>','<div class="years">',this.initYears(),"</div>",'<div class="next-more"></div>',"</div>","</div>",'<div class="flyer-date-month">','<button class="prev"></button>','<input type="text" class="flyer-month" value="'+t.month+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-monthMore">',this.initMonths(),"</div>","</div>","</div>",'<div class="flyer-date-body">',"<table>","<thead>","<tr>","<th>日</th>","<th>一</th>","<th>二</th>","<th>三</th>","<th>四</th>","<th>五</th>","<th>六</th>","</tr>","</thead>","<tbody>",this.initDays(),"</tbody>","<tfoot></tfoot>","</table>","</div>",'<div class="flyer-date-footer">',e.isTime?this.initHMS():"",'<div class="flyer-date-btn">',e.isClear?'<button class="flyer-clear">清空</button>':"",e.isToday?'<button class="flyer-today">今天</button>':"",e.isSure?'<button class="flyer-confirm">确认</button>':"","</div>","</div>","</div>"];this.container?(i.splice(0,1),i.splice(i.length-1,1),this.container.html(i.join(""))):$("body").append(i.join("")),this.container=$("#flyer-date-"+this.selector.attr("id")),this.$header=this.container.find(".flyer-date-header"),this.$headerYear=this.$header.find(".flyer-date-year"),this.$headerMonth=this.$header.find(".flyer-date-month"),this.$body=this.container.find(".flyer-date-body"),this.$footer=this.container.find(".flyer-date-footer"),this.$footerTime=this.$footer.find(".flyer-date-time"),this.$footerBts=this.$footer.find(".flyer-date-btn")},initYears:function(t){for(var e=[],i=parseInt(t||this._date.year),n=i-4;n<i+8;n++)e.push("<span class='"+(this.isEffectiveDateForYear(n)?"":"flyer-dont-select")+"' month='"+n+"'>"+n+"</span>");return e.join("")},initMonths:function(){for(var t=[],e=1;e<=12;e++)t.push("<span class='"+(this.ifEffectiveDateForMonth(e)?"":"flyer-dont-select")+"' month='"+e+"'>"+this.justShowText(e)+"</span>");return t.join("")},initHMS:function(){return['<div class="flyer-date-time">',"<label>时间</label>",'<span class="hour">'+this._date.hours+"</span>:",'<span class="minute">'+this._date.minutes+"</span>:",'<span class="second">'+this._date.second+"</span>",this.initHours(),this.initMinutes(),this.initSeconds(),"</div>"].join("")},initDays:function(){for(var t=[],e=this.getStart(),i=(this.getEnd(),this._date),n=this.getMonthDays(i.month,i.year),s=!1,a=n+e,r=1,o=1,l=0;r<=a;r++)0==l&&t.push("<tr>"),l==e&&(s=!0),o>n&&(s=!1),s?(t.push("<td class='"+(o===parseInt(this._date.day)?"flyer-today ":"")+(this.isEffectiveDate(o)?"":"flyer-dont-select")+"'>"+o+"</td>"),o++):t.push("<td class='flyer-dont-select'>&nbsp;</td>"),7===++l&&(t.push("</tr>"),l=0);return t.join("")},isEffectiveDate:function(t,e,i){t=t||this._date.day,e=e||this._date.month,i=i||this._date.year;var n=new Date(this.precisionFormat(t,e,i)),s=new Date(this.minDate||this.options.minDate),a=n;return a<=new Date(this.maxDate||this.options.maxDate)&&a>=s},precisionFormat:function(t,e,i){var n=this._date.hours,s=this._date.minutes,a=this._date.second;return this.options.isPrecision?i+"/"+e+"/"+t+" "+n+":"+s+":"+a:i+"/"+e+"/"+t},isEffectiveDateForYear:function(t){var e=new Date(this.minDate||this.options.minDate);return t<=new Date(this.maxDate||this.options.maxDate).getFullYear()&&t>=e.getFullYear()},ifEffectiveDateForMonth:function(t){t=t||this._date.month;var e=this._date.year,i=new Date(e+"/"+t+"/01"),n=new Date(this.minDate||this.options.minDate),s=new Date(this.maxDate||this.options.maxDate),a=new Date(n.getFullYear()+"/"+(n.getMonth()+1)+"/01");return i<=new Date(s.getFullYear()+"/"+(s.getMonth()+1)+"/01")&&i>=a},isEffectiveForDate:function(t){var e=new Date(this.minDate||this.options.minDate),i=new Date(this.maxDate||this.options.maxDate),n=new Date(t);return n<=i&&n>=e},isPickerBtnStatus:function(){this.isEffectiveForDate(new Date)?this.$footerBts.find(".flyer-today").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-today").addClass("flyer-dont-select"),this.isEffectiveForDate(this.formatDate())?this.$footerBts.find(".flyer-confirm").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-confirm").addClass("flyer-dont-select")},initHours:function(){var t=this;return['<div class="flyer-date-hours">','<div class="flyer-date-minTool">小时<span>x</span></div>','<div class="flyer-hours">',function(){for(var e=[],i=1;i<24;i++)e.push("<span>"+t.justShowText(i)+"</span>");return e.join("")}(),"</div>","</div>"].join("")},initMinutes:function(){var t=this;return['<div class="flyer-date-minutes">','<div class="flyer-date-minTool">分钟<span>x</span></div>','<div class="flyer-minutes">',function(){for(var e=[],i=1;i<60;i++)e.push("<span>"+t.justShowText(i)+"</span>");return e.join("")}(),"</div>","</div>"].join("")},initSeconds:function(){var t=this;return['<div class="flyer-date-seconds">','<div class="flyer-date-minTool">秒数<span>x</span></div>','<div class="flyer-seconds">',function(){for(var e=[],i=1;i<60;i++)e.push("<span>"+t.justShowText(i)+"</span>");return e.join("")}(),"</div>","</div>"].join("")},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getYMD:function(t){var e=new Date(t||this.options.startDate);return{year:e.getFullYear(),month:this.justShowText(e.getMonth()+1),day:this.justShowText(e.getDate()),hours:this.justShowText(e.getHours()),minutes:this.justShowText(e.getMinutes()),second:this.justShowText(e.getSeconds())}},justShowText:function(t){return t>=10?t:"0"+t},getMonthDays:function(t,e){switch(parseInt(t)){case 2:return this.isLeapYear(e)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},getDay:function(t){return new Date(t).getDay()},getStart:function(){var t=this._date;return this.getDay(t.year+"/"+t.month+"/01")},getEnd:function(){var t=this._date;return this.getDay(t.year+"/"+t.month+"/"+this.getMonthDays(t.month,t.year))},formatDate:function(){return this.options.format.replace(/yyyy/gi,this._date.year).replace(/mm/,this._date.month).replace(/dd/gi,this._date.day).replace(/hh/gi,this._date.hours).replace(/MM/,this._date.minutes).replace(/ss/gi,this._date.second)},close:function(){this.container.css({display:"none"})},closeAll:function(){$(".flyer-date").hide()},setMaxDate:function(t){this.maxDate=t},setMinDate:function(t){this.minDate=t},targetIsShow:function(t){t.hasClass("flyer-date-show")?t.removeClass("flyer-date-show"):t.addClass("flyer-date-show")},isJQuery:function(t){return t instanceof jQuery},initEvent:function(){var t=this;this.selector.on("click",function(e){t.closeAll(),t.refresh();var i=$("#flyer-date-"+t.selector.attr("id")),n=t.selector.offset();i.css({top:n.top+t.selector[0].offsetHeight+"px",left:n.left+"px",display:"block"}),flyer.stop(e)})},events:function(){var t=this;this.$headerYear.on("click",".more,.flyer-year",function(){var e=$(this).parent().find(".flyer-date-yearMore");t.targetIsShow(e)}),this.$headerMonth.on("click",".more,.flyer-month",function(){var e=$(this).parent().find(".flyer-date-monthMore");t.targetIsShow(e)}),this.$headerYear.on("click",".next,.prev",function(){var e=$(this).hasClass("next");t._date.year=e?parseInt(t._date.year)+1:parseInt(t._date.year)-1,t.refresh()}),this.$headerMonth.on("click",".next,.prev",function(){$(this).hasClass("next")?parseInt(t._date.month)<12&&(t._date.month=t.justShowText(parseInt(t._date.month)+1)):parseInt(t._date.month)>1&&(t._date.month=t.justShowText(parseInt(t._date.month)-1)),t.refresh()}),this.$headerMonth.on("click",".flyer-date-monthMore span:not([class='flyer-dont-select'])",function(){t._date.month=$(this).text(),t.refresh()}),this.$headerYear.on("click",".flyer-date-yearMore span:not([class='flyer-dont-select'])",function(){t._date.year=$(this).text(),t.refresh()}),this.$headerYear.on("click",".prev-more,.next-more",function(){$(this).hasClass("next-more")?t.$headerYear.find(".years").html(t.initYears(t.$headerYear.find(".flyer-date-yearMore span").last(0).text())):t.$headerYear.find(".years").html(t.initYears(t.$headerYear.find(".flyer-date-yearMore span").eq(0).text()))}),this.$body.find("td:not([class='flyer-dont-select'])").off("click"),this.$body.on("click","td:not([class='flyer-dont-select'])",function(){$(this).hasClass("flyer-dont-select")||(t._date.day=t.justShowText($(this).text()),t.options.click.call(this,t.formatDate(),t._date),t.selector.val(t.formatDate()),t.options.choose.call(this,t.formatDate(),t._date),t.close())}),this.$footerTime.on("click",".hour,.flyer-date-hours .flyer-date-minTool span",function(){var e=t.$footerTime.find(".flyer-date-hours");t.targetIsShow(e)}),this.$footerTime.on("click",".flyer-date-hours .flyer-hours span",function(){var e=t.$footerTime.find(".flyer-date-hours");t.targetIsShow(e),t.$footerTime.find(".hour").html($(this).text()),t._date.hours=$(this).text(),t.refresh()}),this.$footerTime.on("click",".minute,.flyer-date-minutes .flyer-date-minTool span",function(){var e=t.$footerTime.find(".flyer-date-minutes");t.targetIsShow(e)}),this.$footerTime.on("click",".flyer-date-minutes .flyer-minutes span",function(){var e=t.$footerTime.find(".flyer-date-minutes");t.targetIsShow(e),t.$footerTime.find(".minute").html($(this).text()),t._date.minutes=$(this).text(),t.refresh()}),this.$footerTime.on("click",".second,.flyer-date-seconds .flyer-date-minTool span",function(){var e=t.$footerTime.find(".flyer-date-seconds");t.targetIsShow(e)}),this.$footerTime.on("click",".flyer-date-seconds .flyer-seconds span",function(){var e=t.$footerTime.find(".flyer-date-seconds");t.targetIsShow(e),t.$footerTime.find(".second").html($(this).text()),t._date.second=$(this).text(),t.refresh()}),this.$footerBts.on("click",".flyer-clear",function(){t.selector.val(""),t._date=t.getYMD(),t.close()}),this.$footerBts.on("click",".flyer-today",function(){t._date=t.getYMD(new Date),t.options.click.call(this,t.formatDate(),t._date),t.selector.val(t.formatDate()),t.options.choose.call(this,t.formatDate(),t._date),t.close()}),this.$footerBts.on("click",".flyer-confirm",function(){t.options.click.call(this,t.formatDate(),t._date),t.selector.val(t.formatDate()),t.options.choose.call(this,t.formatDate(),t._date),t.close()}),$(this.container).on("click",function(t){flyer.stop(t)}),$(document).on("click",function(e){t.close()})}},new i(t,e)}),flyer.extend("demo",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e)}},new i(t,e)}),flyer.define(function(t,e){var i=["flyer-modal","flyer-dialog","flyer-dialog-title","flyer-dialog-toolbar","flyer-close","flyer-dialog-content","flyer-dialog-footer","flyer-btn","flyer-dialog-move"],n=(document.body,document,location,window,function(t){return this.init(t)});return n.DEFAULTS={container:"body",title:"",content:"",isMove:!0,timer:4e3,offset:"auto",fixed:!0,skin:"",area:[],btnAlign:"c",cancel:function(){return!1},showCancelBtn:!0,modalClose:!1,isModal:!1,autoClose:!0,pageUrl:"",anim:"bounceInDown",isOutAnim:!0,btns:[{text:"取消",skin:"",click:function(){this.close()}}],afterCreated:function(){}},n.prototype={init:function(t){this.index=(new Date).getTime(),this.options=$.extend(!0,{},n.DEFAULTS,t),this.$container=$(this.options.container),this.template(),this.bindEvents()},bindEvents:function(){var t=this,e=t.options;this.$title.on("mousedown",function(e){t.mousedown(e)}),$(document).mousemove(function(e){t.mousemove(e)}),$(document).mouseup(function(e){t.mouseup(e)}),this.$btnClose.on("click",function(i){e.cancel.call(this),t.close(),flyer.stop(i)});for(var i=0,n=e.btns,s=t.$btns,a=this.$btns.length;i<a;i++)!function(e,i){$(e).on("click",function(){i.click.call(t,e)})}(s[i],n[i])},template:function(){var t=this.options;this.selector=i[1]+this.index,this.modalSelector=i[0]+this.selector;var e=['<div id="'+this.modalSelector+'" class="'+i[0]+'"></div>','<div id="'+this.selector+'" class="'+i[1]+(t.skin.length>0?" "+t.skin:"")+(t.anim.length&&t.isOutAnim>0?" "+t.anim:"")+'">','<div class="'+i[2]+(t.isMove?" flyer-move":"")+'">',"<h4> ",t.title,"</h4>","</div>",'<div class="'+i[3]+'">',t.showCancelBtn?'<i class="'+i[4]+'">x</i>':"","</div>",'<div class="'+i[5]+'">',t.content,"</div>",'<div class="'+i[6]+'">',this.builderBtn(),"</div>","</div>"];t.isModal||e.splice(0,1),this.$container.append(e.join("")),this.$el=$("#"+this.selector),this.$title=this.$el.find("."+i[2]),this.$content=this.$el.find("."+i[5]),this.$footer=this.$el.find("."+i[6]),this.$toolbar=this.$el.find("."+i[3]),this.$btnClose=this.$el.find("."+i[4]),this.$btns=this.$footer.find("."+i[7]),this.$modal=$("#"+this.modalSelector),this.handtailor(),this.setOffset()},handtailor:function(){var t=this.options,e=this;switch(t.modalClose&&t.isModal&&e.$modal.on("click",function(){e.close()}),0===t.title.length&&this.$title.remove(),t.area.length>1&&this.$content.css({width:t.area[0],height:t.area[1]}),t.offset instanceof Array&&t.offset.length>1&&this.$el.css({top:t.offset[0],left:t.offset[1]}),t.fixed&&this.$el.css("position","fixed"),t.btnAlign){case"c":this.$footer.css("text-align","center");break;case"r":this.$footer.css("text-align","right");break;case"l":this.$footer.css("text-align","left")}},mousedown:function(t){var e=this.options;$("#"+this.selector).find("."+i[2]);this.isMove=void 0===e||void 0===e.isMove||e.isMove,this.isMove&&(this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.$el.data("position",this.$el.css("position")),this.$el.css({position:"absolute",top:parseInt(this.$el.css("top"))+parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!1})},mousemove:function(t){if(this.isMove){var e=t.clientX-this.offsetX,i=t.clientY-this.offsetY+parseInt(this.getScrollTop());this.$el.css({top:i,left:e})}},mouseup:function(){this.isMove&&(this.isMove=!1,this.$el.css({position:this.$el.data("position"),top:parseInt(this.$el.css("top"))-parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!0})},builderBtn:function(){for(var t=this.options.btns,e=[],n=0,s=t.length;n<s;n++)e.push('<button class="'+i[7]+" "+t[n].skin+'">'+t[n].text+"</button>");return e.join("")},close:function(){this.$el.remove(),this.$modal.remove()},setOffset:function(){var t=this;switch(t.options.offset){case"auto":var e=this.getOffset(t.$el.get(0));t.$el.css({top:String(e.y)+"px",left:String(e.x)+"px"})}},getScrollTop:function(){var t=document.documentElement.scrollTop;return 0===t&&(t=document.body.scrollTop),t},getOffset:function(t){try{var e=$("body").width(),i=window.screen.height;return{x:e/2-(void 0!==t?t.offsetWidth:0)/2,y:i/3-(void 0!==t?t.offsetHeight:0)/2,w:"body".offsetWidth,h:"body".clientHeight}}catch(t){}}},{alert:function(t,e){return(e=e||{}).content=t,e.title=e.title||"提示",e.skin=e.skin||"flyer-dialog-alert",new n(e)},confirm:function(t,e,i){return(i=$.extend({btns:[{text:"确定",skin:"flyer-btn-blue",click:function(t){this.close(),"function"==typeof e&&e.call(this,t,!0)}},{text:"取消",skin:"",click:function(t){this.close(),"function"==typeof e&&e.call(this,t,!1)}}]},i)).content=t,i.skin=i.skin||"flyer-dialog-confirm",new n(i)},open:function(t){t.skin=t.skin||"flyer-dialog-open";var e=new n(t);return e.options.pageUrl.length>0?e.$content.load(e.options.pageUrl,function(){"function"==typeof t.afterCreated&&t.afterCreated(),e.setOffset()}):"function"==typeof t.afterCreated&&t.afterCreated(),e},msg:function(t,e){(e=e||{}).content=t,e.showCancelBtn=void 0!==e.showCancelBtn&&e.showCancelBtn,e.autoClose=void 0===e.autoClose||e.autoClose,e.anim=e.anim||"bounceIn",e.skin=e.skin||"flyer-dialog-msg";var i=new n(e);return i.$title.remove(),i.$footer.remove(),e.autoClose&&setTimeout(function(){i.close()},i.options.timer),i},tip:function(t,e){return(e=e||{}).skin=e.skin||"flyer-dialog-tip",e.anim=e.anim||"bounceInDown",e.offset=e.offset||[0,0],this.msg(t,e)},closeAll:function(t){if(void 0===t)$("."+i[1]).remove(),$("."+i[0]).remove();else switch(t){case"alert":$(".flyer-dialog-alert").remove();break;case"confirm":$(".flyer-dialog-confirm").remove();break;case"open":$(".flyer-dialog-open").remove();break;case"msg":$(".flyer-dialog-msg").remove();break;case"tip":$(".flyer-dialog-tip").remove()}}}}),flyer.extend("edit",function(t,e){var i=function(t,e){return this.init(t,e)};i.DEFAULTS={tools:[{name:"document",groups:["bold","italic","underline","strike","sub","super"]},{name:"typeset",groups:["left","center","right"]},{name:"insert",groups:["template","pagerclip"]}],minHeight:150,maxHeight:416,isResize:!1,resizeCallback:function(t){}};var n={bold:{index:"bold",template:'<i class="fa fa-bold bold" data-cmd="bold" title="'+flyer.i18n.initTitle("字体加粗")+'" aria-hidden="true"></i>'},italic:{index:"italic",template:'<i class="fa fa-italic italic" data-cmd="italic" title="'+flyer.i18n.initTitle("引用斜体")+'" aria-hidden="true"></i>'},underline:{index:"underline",template:'<i class="fa fa-underline underline" data-cmd="underline" title="'+flyer.i18n.initTitle("字体下划线")+'" aria-hidden="true"></i>'},strike:{index:"strike",template:'<i class="fa fa-strikethrough strike" data-cmd="strikeThrough" title="'+flyer.i18n.initTitle("字体删除线")+'" aria-hidden="true"></i>'},sub:{index:"sub",template:'<i class="fa fa-subscript sub" data-cmd="subscript" title="'+flyer.i18n.initTitle("下标")+'" name="mark" data-name="mark" aria-hidden="true"></i>'},super:{index:"super",template:'<i class="fa fa-superscript super" data-cmd="superscript" title="'+flyer.i18n.initTitle("上标")+'" name="mark" data-name="mark" aria-hidden="true"></i>'},ol:{index:"ol",template:'<i class="fa fa-list-ol ol" name="list" data-name="list" data-cmd="superscript" title="'+flyer.i18n.initTitle("编号列表")+'" aria-hidden="true"></i>'},ul:{index:"ul",template:'<i class="fa fa-list-ul ul" name="list" data-name="list" title="'+flyer.i18n.initTitle("项目列表")+'" aria-hidden="true"></i>'},left:{index:"left",template:'<i class="fa fa-align-left left" name="align" data-name="align" data-cmd="justifyLeft" title="'+flyer.i18n.initTitle("左对齐")+'" aria-hidden="true"></i>'},center:{index:"center",template:'<i class="fa fa-align-center center" name="align" data-name="align" data-cmd="justifyCenter" title="'+flyer.i18n.initTitle("居中对齐")+'" aria-hidden="true"></i>'},right:{index:"right",template:'<i class="fa fa-align-right right" name="align" data-name="align" data-cmd="justifyRight" title="'+flyer.i18n.initTitle("右对齐")+'" aria-hidden="true"></i>'},link:{index:"link",template:'<i class="fa fa-link link" title="'+flyer.i18n.initTitle("添加链接")+'" aria-hidden="true"></i>'},unlink:{index:"unlink",template:'<i class="fa fa-unlink unlink" title="'+flyer.i18n.initTitle("清除链接")+'" aria-hidden="true"></i>'},template:{index:"template",template:'<i class="fa fa-file-text template inActive" title="'+flyer.i18n.initTitle("引用模板")+'" aria-hidden="true"></i>'},pagerclip:{index:"pagerclip",template:'<i class="fa fa-paperclip pagerclip inActive" title="'+flyer.i18n.initTitle("添加附件")+'" aria-hidden="true"></i>'},img:{index:"img",template:'<i class="fa fa-image img inActive" title="'+flyer.i18n.initTitle("引用图片")+'" aria-hidden="true"></i>'},indent:{index:"indent",template:'<i class="fa fa-indent" data-cmd="indent" title="'+flyer.i18n.initTitle("增加缩进量")+'" aria-hidden="true"></i>'},outdent:{index:"outdent",template:'<i class="fa fa-outdent" data-cmd="outdent" title="'+flyer.i18n.initTitle("减少缩进量")+'" aria-hidden="true"></i>'}};return i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this[0]=t,this.parent=this[0].parent(),this.template(),this.initElms()},template:function(){this.options;var t=['<div class="flyer-edit">','<div class="flyer-edit-tool">',this.initTools(),"</div>",'<div class="flyer-edit-content">','<iframe class="flyer-edit-iframe"></iframe>',"</div>","</div>"];this.parent.append(t.join("")),this[0].hide()},elms:{},initEvents:function(){var t=this,e=this.options;this.elms.tools.each(function(e){$(this).on("click",function(){var e=$(this),i=e.data("cmd"),n=e.data("name");$("i[name='"+n+"']").not(this).removeClass("active"),e.hasClass("inActive")||(e.hasClass("active")?e.removeClass("active"):e.addClass("active")),t.command(i)})}),this.elms.editer.off("click").on("click",function(e){var i=e.target,n=$(i),s=n.parents(),a=[],r=[];if(!n.hasClass("flyer-edit-write")){a.push(i.tagName);for(var o=s.filter(function(t,e){return"BODY"!==e.tagName&&"HTML"!==e.tagName&&"flyer-edit-write"!==e.className&&"DIV"!==e.tagName}),l=0,c=o.length;l<c;l++)a.push(o[l].tagName);0===(a=t.getCommands(a)).length&&(t.findElements(i,r),a=t.getCommands(r)),a.length>=0&&t.elms.container.find("i.active").removeClass("active"),t.lotCommand(a)}}),e.isResize&&this.onresize()},onresize:function(){var t=this,e=t.options;$("#resize").click(function(i){$(this).hasClass("fa-expand")?($(this).removeClass("fa-expand").addClass("fa-compress").attr("title","点击缩小"),t.elms.content.css("height",e.maxHeight),"function"==typeof e.resizeCallback&&e.resizeCallback(!0)):($(this).addClass("fa-expand").removeClass("fa-compress").attr("title","点击放大"),t.elms.content.css("height",e.minHeight),"function"==typeof e.resizeCallback&&e.resizeCallback(!1))})},findElements:function(t,e){e=flyer.isArray(e)?e:[],t.children&&t.children.length>0&&t.lastChild.tagName&&(e.push(t.lastChild.tagName),this.findElements(t.lastChild,e))},findDictionary:function(t){switch(t){case"B":return"bold";case"I":return"italic";case"U":return"underline";case"STRIKE":return"strike";case"SUP":return"super";case"SUB":return"sub";default:console.warn(t+" is not find in the dictionary.")}},getCommands:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=this.findDictionary(t[i]);s&&e.push(s)}return e},lotCommand:function(t){for(var e=this,i=0,n=t.length;i<n;i++){var s=e.elms.container.find("i."+t[i]),a=s.data("cmd");s.addClass("active"),e.command(a),e.command(a)}},command:function(t){if(t){this.elms.editer.focus();var e=this.elms.iframeWindow.document.execCommand(t);console.log(t+":"+e)}},initElms:function(){var t=this;this.elms.container=this.parent.find(".flyer-edit"),this.elms.content=this.parent.find(".flyer-edit-content"),this.elms.toolContainer=this.elms.container.find(".flyer-edit-tool"),this.elms.tools=this.elms.toolContainer.find("i.fa"),this.elms.iframe=this.elms.container.find("iframe"),this.elms.iframeWindow=this.elms.iframe[0].contentWindow,setTimeout(function(){t.elms.iframe.contents().find("head").append('<style>* {margin: 0px;padding: 0px;outline: 0px solid transparent; }body {  font-family:"Helvetica Neue", Helvetica, "PingFang SC", sans-serif;  font-size: 15px;  color: #333;  background-color: #fff;  margin: 10px; }a {  color: #0782C1; }ol, ul, dl {  *margin-right: 0px;  padding: 0 40px; }h1, h2, h3, h4, h5, h6 {  font-weight: normal;  line-height: 1.2; }hr {  border: 0px;  border-top: 1px solid #ccc; }.flyer-edit-write {  min-height: 100px;}::-webkit-scrollbar{ width: 6px; height: 6px;}::-webkit-scrollbar-thumb{    background-color: rgba(50,50,50,.3);    border-radius: 4px;}::-webkit-scrollbar-track{    background-color: rgba(50,50,50,.1);}.flyer-write-title{    font-size: 14px;    border-top: 1px dashed #ccc;    padding-top: 5px;    padding-bottom: 5px;    color: #888;}.flyer-write-html pre { white-space: pre-wrap; word-wrap: break-word;}.flyer-write-html{    margin-left: 10px;    line-height: 24px;    border-left: 1px solid #ccc;    padding-left: 10px;    color: #888;}</style>'),t.elms.iframe.contents().find("body").append("<div class='flyer-edit-write' style='min-height:100px;position:relative;' contenteditable='true'></div>"),t.elms.editer=$(t.elms.iframeWindow.document.getElementsByClassName("flyer-edit-write")[0]),t.initEvents()},0)},initTools:function(){for(var t=this.options,e=[],i=0,s=t.tools,a=s.length;i<a;i++){e.push("<span>");for(var r=0,o=s[i].groups,l=o.length;r<l;r++)n[o[r]]&&e.push(n[o[r]].template);e.push("</span>")}return t.isResize&&e.push('<i class="fa fa-expand" title="点击展开" id="resize" style="float:right;"></i>'),e.join("")},getContent:function(){return this.elms.editer.html()},getText:function(){var t=this.getContent();return t=t.replace(/(<\/div>)|(<br>|<br\/>)/gi,"\n"),t=t.replace(/<[^>]+>/gi,"")},getFullText:function(){var t=this.elms.iframeWindow.document.getElementsByClassName("flyer-readyonly-html");return t.length>0?this.getText()+$(t[0]).text():this.getText()},getFullContent:function(){var t=this.elms.iframeWindow.document.getElementsByClassName("flyer-readyonly-html");return t.length>0?this.getContent()+t[0].innerHTML:this.getContent()},setContent:function(t){var e=this;setTimeout(function(){e.elms.editer.html(t)},1)},setReadonlyText:function(t){var e=this.elms.iframeWindow.document,i=e.createElement("div");i.className="flyer-readyonly-html",i.innerHTML+=t,e.body.appendChild(i)}},new i(t,e)}),flyer.extend("form",function(t,e,i){var n=function(t,e,i){return this.init(t,e,i)};return n.DEFAULTS={rules:{},messages:{},submit:".submit",isFormSumbit:!1,validBefore:function(){return!1}},n.prototype={init:function(t,e,i){this.options=$.extend(!0,{},n.DEFAULTS,e),this.formElm=t,this.formElm.attr("novalidate","true"),this.getValidData(),this.errorMsg={},this.initEvent(i)},initEvent:function(t){var e=this;$(this.formElm).find(this.options.submit).on("click",function(i){try{e.submit(i,t)}catch(t){console.error(t),i.preventDefault()}})},elements:function(){return $(this.formElm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled")},elementValue:function(t){var e=$(t);t.type;return this.checkable(t.type)?$(this.formElm).find("[name='"+t.name+"']").filter(":checked").val():e.val()},attributeRules:function(t){var e={};for(var i in this.methods){var n=t.getAttribute(i);n&&(e[i]=n)}return e},getValidData:function(){for(var t=0,e=this.elements(),i=this.options.rules,n=e.length;t<n;t++){var s=e[t].name,a=this.attributeRules(e[t]);s.length>0&&!this.isEmptyObject(a)&&(i[s]=a)}},formCheck:function(){this.getValidData();for(var t=0,e=this.elements(),i=(this.options.rules,e.length);t<i;t++){var n=e[t].name;if(!this.check(e[t]))return this.showError(n,e[t]),!1}return!0},getElementRulesByName:function(t){return this.options.rules[t]},check:function(t){var e=this.elementValue(t),i=t.name,n=this.getElementRulesByName(i),s=!0;this.errorMsg[i]=[];for(var a in n)this.methods[a].call(this,e,t,n[a])||(s=!1,this.errorMsg[i].push(this.defaultMessage(this.messages[a],n[a])));return s},format:function(t,e){return 1===arguments.length?function(){var e=$.makeArray(arguments);return e.unshift(t),$.validator.format.apply(this,e)}:void 0===e?t:(arguments.length>2&&e.constructor!==Array&&(e=$.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),$.each(e,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},messages:{required:"该项为必填项",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:"请输入一个长度最多是 {0} 的字符串",minlength:"请输入一个长度最少是 {0} 的字符串",rangelength:"请输入一个长度介于 {0} 和 {1} 之间的字符串",range:"请输入一个介于 {0} 和 {1} 之间的值",max:"请输入一个最大为 {0} 的值",min:"请输入一个最小为 {0} 的值"},defaultMessage:function(t,e){return/\$?\{(\d+)\}/g.test(t)&&(t=this.format(t,e)),t},addMethods:function(t,e,i){this.methods[t]=e,this.messages[t]=void 0!==i?i:this.message[t]},checkable:function(t){return/radio|checkbox/i.test(t.type)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},optional:function(t){var e=this.elementValue(t);return!this.methods.required.call(this,e,t)&&"dependency-mismatch"},findByName:function(t){return $(this.formElm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return $("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},methods:{required:function(t,e,i){if(!i)return"dependency-mismatch";if("select"===e.nodeName.toLowerCase()){var n=$(e).val();return n&&n.length>0}return this.checkable(e)?this.getLength(t,e)>0:t.length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i},maxlength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(t,e,i){},equalTo:function(t,e,i){return t===this.formElm.find("[name='"+i+"']").val()},remote:function(t,e,i,n){}},submit:function(t,e){this.options.validBefore.call(this),this.elements().removeClass("flyer-form-error"),this.formElm.find(".flyer-form-error").removeClass("flyer-form-error"),this.formCheck()?this.options.isFormSumbit?this.formElm.submit():("function"==typeof e&&e.call(this),t.preventDefault()):t.preventDefault()},showError:function(t,e){if(flyer&&flyer.msg){flyer.closeAll("msg");for(var i="",n=0,s=this.errorMsg[t],a=s.length;n<a;n++)i+=s[n]+"</br>";flyer.msg(i)}var r=$(e);r.hasClass("filter-options")?r.parent().addClass("flyer-form-error"):this.checkable(e)?/radio/i.test(e.type)?this.findByName(t).next().addClass("flyer-form-error"):this.findByName(t).parent().addClass("flyer-form-error"):r.addClass("flyer-form-error"),r.focus()},getData:function(){var t=[];t.push("{");for(var e=0,i=this.elements(),n=i.length;e<n;e++)t.push('"'+i[e].name+'":"'+this.elementValue(i[e])+'"'),e+1<n&&t.push(",");return t.push("}"),JSON.parse(t.join(""))}},new n(t,e,i)}),flyer.extend("page",function(t,e){function i(t,e){return this.init(t,e)}return i.DEFAULTS={ajax:{URL:null,data:null},data:[],curIndex:1,pageIndex:1,pageSize:5,prevText:"<i class='fa fa-caret-left'></i>",nextText:"<i class='fa fa-caret-right'></i>",totalNum:0,pagerLen:5,pageSum:0,isReload:!1,fnBeforeClick:function(){return!1},fnClick:function(){return!1},fnAfterClick:function(){return!1}},i.prototype={init:function(t,e){this.options=this.getOptions(e),this[0]=t,this.render()},render:function(){var t=this,e=t.options;e.ajax;if(e.pageSum=Math.ceil(e.totalNum/e.pageSize),e.pageSum<=0)return $(this[0]).empty(),t;e.pageSum<=e.pagerLen||e.pageSum-e.pagerLen==e.pageIndex?$(this[0]).html(t.simpleTemplate()):$(this[0]).html(t.template()),t.addEvent()},getOptions:function(t){return $.extend(!0,{},i.DEFAULTS,t)},reload:function(){this.render()},template:function(){var t='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',e=this.options,i=Math.floor((e.pagerLen-2)/2),n=e.curIndex<e.pagerLen?e.pageIndex:e.curIndex-i,s=e.curIndex<e.pagerLen?e.pagerLen:e.curIndex+i;for(i=0===i?1:i,e.curIndex+2*i>e.pageSum-1&&(n=e.pageSum-e.pagerLen,s=e.pageSum),t+='<li class="prev">'+e.prevText+"</li>",e.curIndex>=e.pagerLen&&(t+="<li>"+e.pageIndex+"</li>",t+='<li class="omit">...</li>'),n;n<=s;n++)e.curIndex===n?t+='<li class="active">'+n+"</li>":t+="<li>"+n+"</li>";return e.curIndex+2*i<=e.pageSum-1&&(t+='<li class="omit">...</li>',t+="<li>"+e.pageSum+"</li>"),t+='<li class="next">'+e.nextText+"</li>",t+="</ul></div></div>"},simpleTemplate:function(){var t='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',e=this.options,i=e.pageIndex,n=e.pageSum;for(t+='<li class="prev">'+e.prevText+"</li>",i;i<=n;i++)e.curIndex===i?t+='<li class="active">'+i+"</li>":t+="<li>"+i+"</li>";return t+='<li class="next">'+e.nextText+"</li>",t+="</ul></div></div>"},addEvent:function(){var t=this,e=t.options,i=$(t[0]).find(".flyer-pager-view").find("li");i.each(function(){var n=$(this);n.hasClass("omit")||n.on("click",function(){if(n.hasClass("next")){if(e.curIndex>=e.pageSum)return this;e.curIndex++}else if(n.hasClass("prev")){if(e.curIndex<=e.pageIndex)return this;e.curIndex--}else e.curIndex=parseInt(n.text());if(e.curIndex<=e.pageSum){if(t.reload(),n.hasClass("next")||n.hasClass("prev")){var s=i.parent().find(".active");i.removeClass("active"),s.next().addClass("active")}else i.removeClass("active"),n.addClass("active");e.fnClick.call(t)}})})}},new i(t,e)}),flyer.extend("searches",function(t,e){function i(t,e){return this.init(t,e)}var n=["flyer-searches","keywords","flyer-seraches-input","fa fa-close","flyer-combobox-items","hover"];return i.DEFAULT={isMulti:!0,url:"",searchName:"",fieldValue:"",fieldName:"",requestData:[],spaceTime:1e3,separtor:";",distinck:!0,emptyMsg:"未检索到相关的数据..",fnDistinckTips:function(t,e){flyer.closeAll("msg"),flyer.msg("你已经选择了[ "+$(e).text()+" ]")},fnDataProcessing:function(){this._data=this._data.rows},fnSelected:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULT,e),this[0]=t,$(this[0]).html(this.template()),this.events()},template:function(){return['<div class="flyer-searches">','<div class="keywords"></div>','<input type="text" data-selected="" class="flyer-seraches-input" />','<div class="flyer-combobox-items">',"<ul>","</ul>","</div>","</div>"].join("")},requestData:function(t){var e=this,i=e.options,n={};"function"==typeof i.requestData?i.requestData.call(this,t):(n[i.searchName]=t,$.ajax({url:i.url,type:"get",data:n,success:function(t){e._data=t,i.fnDataProcessing.call(e,t),e.render(t),e.eventSelected()}}))},events:function(){var t=this,e=t.options,i=null;t.keyIndex=-1,t.$input=$(t[0]).find("."+n[2]),t.$keywords=$(t[0]).find("."+n[1]),t.$items=$(t[0]).find("."+n[4]).find("ul"),t.$input.on("keyup",function(s){i&&clearInterval(i);var a=$(this).val().trim();switch(s.keyCode){case 13:var r=t.$items.parent().css("display");return void(a.length>0&&"none"==r?t.requestData(a):(t.$items.find("."+n[5]).click(),t.$items.find("li").removeClass(n[5])));case 8:return t.$items.parent().hide(),0!=this.value.length?!1:void("del"==this.getAttribute("del")?setTimeout(function(){t.$keywords.find("span>i").last().click()},100):(this.setAttribute("del","del"),t.$keywords.find("span").last().css("border","1px solid #F7B824")));case 38:return void t.keyUp();case 40:return void t.keyDown();default:t.$items.parent().hide(),this.setAttribute("del",null),t.$keywords.find("span").last().css("border","inherit")}i=setTimeout(function(){a.length>0&&t.requestData(a)},e.spaceTime)}),$(document).on("click",function(e){t.$items.parent().hide(),flyer.stop(e)})},eventSelected:function(){var t=this,e=t.options;t.$items.find("li").on("click",function(){var i=$(this).data("key");if(e.distinck&&t.hasValue(i))return e.fnDistinckTips.call(t,i,this),!1;t.$keywords.append(t.insertSpan.call(this,e)),t.$items.parent().hide();var n=t.$input.data("selected")||"";t.$input.data("selected",n+i+";"),t.$input.val(""),t.eventDeleteSpan(),e.fnSelected.call(t,this),setTimeout(function(){t.$input.css("padding-left",t.$keywords.get(0).offsetWidth+10)},10),t.keyIndex=0})},insertSpan:function(t){return"<span data-key='"+$(this).data("key")+"'>"+$(this).text()+t.separtor+"<i class='"+n[3]+"'></i></span>"},eventDeleteSpan:function(){var t=this,e=this.$input,i=this.options;t.$keywords.find("span>i").on("click",function(){var n=t.$input.data("selected")||"";e.data("selected",n.replace($(this).parent().data("key")+i.separtor,"")),$(this).parent().remove(),t.$input.css("padding-left",t.$keywords.get(0).offsetWidth),e.attr("del",null),i.fnSelected.call(t,this)})},render:function(){var t=this._data,e=[],i=this.options;if(t&&0!=t.length)for(var n=0,s=t.length;n<s;n++)e.push("<li data-key='"+t[n][i.fieldValue]+"'><div>"+t[n][i.fieldName]+"</div></li>");else e.push("<li><div>"+i.emptyMsg+"</div></li>");this.$items.html(e.join("")),this.$items.parent().show()},keyUp:function(){var t=this,e=t.$items.find("li").length;t.$items.find("li").removeClass(n[5]),-1==t.keyIndex&&(t.keyIndex=e),t.keyIndex--,t.$items.find("li").eq(t.keyIndex).addClass(n[5])},keyDown:function(){var t=this,e=t.$items.find("li").length;t.$items.find("li").removeClass(n[5]),t.keyIndex++,t.keyIndex==e&&(t.keyIndex=0),t.$items.find("li").eq(t.keyIndex).addClass(n[5])},hasValue:function(t){var e=this.$input.data("selected");return new RegExp(t,"ig").test(e)},getSelectedData:function(){return{fieldValue:this.$input.data("selected"),fieldName:this.$keywords.find("span").text()}}},new i(t,e)}),flyer.define("store",function(){function t(){return void 0===i&&(i=window.localStorage),!0}function e(t){return"string"==typeof t&&n.test(t)}var i,n=/^[0-9A-Za-z_@-]*$/;return{set:function(n,s){var a=!1;if(e(n)&&t())try{s+="",i.setItem(n,s),a=!0}catch(t){}return a},get:function(n){if(e(n)&&t())try{return i.getItem(n)}catch(t){}return null},remove:function(n){if(e(n)&&t())try{return i.removeItem(n),!0}catch(t){}return!1},clear:function(){if(t()){try{for(var e in i)i.removeItem(e);return!0}catch(t){}return!1}}}}),flyer.extend("tab",function(t,e){function i(t,e){return this.init(t,e)}var n=["flyer-tab","flyer-tab-title","flyer-tab-content","flyer-tab-active","flyer-tab-item","active"];return i.DEFAULT={tabs:[{title:"tab1",content:"",url:"",cache:!1},{title:"tab2",content:"",url:"",cache:!1}],defaultIndex:0,skin:"flyer-tab-default",beforeClick:function(){return!1},click:function(){return!1},afetrClick:function(){return!1},beforeCreated:function(){return!1},afterCreated:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULT,e),this[0]=t;var n=this.options,s=n.beforeCreated,a=n.afterCreated;s.call(this,n),this.hasTag(),this.haveTag||$(this[0]).html(this.template()),this.events(),a.call(this,n),this.$tabs.eq(n.defaultIndex).click()},hasTag:function(){$(this[0]).find("."+n[0]).length>0?this.haveTag=!0:this.haveTag=!1},template:function(){for(var t=this.options,e=[],i=[],s=['<div class="'+n[0]+(t.skin.length>0?" "+t.skin:"")+'">','<div class="'+n[1]+'">',"<ul>","</ul>","</div>",'<div class="'+n[2]+'">',"</div>","</div>"],a=0,r=t.tabs.length,o=t.tabs;a<r;a++)e.push("<li data-index='"+a+"'>"+o[a].title+"</li>"),i.push("<div class='"+n[4]+"'></div>");return s.splice(3,0,e.join("")),s.splice(7,0,i.join("")),s.join("")},events:function(){var t=this,e=this.options;t.$title=$(this[0]).find("."+n[1]),t.$content=$(this[0]).find("."+n[2]),t.$tabs=this.$title.find("li"),t.$tabs.on("click",function(){var i=$(this),s=$(this).data("index");t.$tabs.removeClass(n[3]),i.addClass(n[3]),t.haveTag?t.showContent(s):t.fullContent(s),e.click.call(t,this)})},fullContent:function(t){var e=this.options.tabs[t],i=(this.$content,this.$content.find("."+n[4])),s=i.eq(t),a="";if(0===s.length)return!1;a=s.text(),i.removeClass(n[5]),e.content?e.cache&&0!==a.length||s.html(e.content):e.url&&(e.cache&&0!==a.length||s.load(e.url,function(){flyer.i18n&&flyer.i18n.initTargetData()})),s.addClass(n[5])},showContent:function(t){var e=this.$content.find("."+n[4]),i=e.eq(t);if(0==i.length)return!1;e.removeClass(n[5]),i.addClass(n[5])}},new i(t,e)}),flyer.extend("table",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={columns:[],data:[],resizer:!1,width:"auto",height:"auto",fixedHeader:!0,rowdblClick:function(){},rowClick:function(){}},i.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,styles:{},className:void 0,sortable:!1,order:"asc",visible:!0,formatter:void 0,sorter:void 0,sortName:void 0},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=t,this.template(),this.initHeaderThemes(),this.initEvents(),this.options.resizer&&this.initGrips()},reload:function(){this.template(),this.initHeaderThemes(),this.initEvents(),this.options.resizer&&this.initGrips()},template:function(){var t=['<div class="flyer-table" style="width:'+this.options.width+";height:"+this.options.height+'">','<div class="flyer-table-toolbar">',"</div>",'<div class="flyer-table-resizer">',"</div>",'<div class="flyer-table-body">',"<table>","<thead>",this.initHeader(),"</thead>","<tbody>",this.initBody(),"</tbody>","<tfoot>","</tfoot>","</table>","</div>",'<div class="flyer-table-page">',"</div>","</div>"];this.selector.html(t.join("")),this.$header=this.selector.find("thead"),this.$body=this.selector.find("tbody")},initHeaderThemes:function(){var t=this,e=(t.options,t._flagColumns);this.$header.find("th").each(function(){var t=$(this),i=t.data("index");t.css(e[i].styles),t.addClass(e[i].className)})},initHeader:function(){var t=[];this._flagColumns={};for(var e=0,n=this.options.columns,s=n.length;e<s;e++){this.options.columns[e]=$.extend(!0,{},i.COLUMN_DEFAULTS,n[e]);var a=n[e];a._index=e,this._flagColumns[e]=a,a.visible&&(a.checkbox?t.push("<th data-index="+a._index+"><label class='flyer-table-checkbox'><input name='"+a.field+"' type='checkbox'/><i></i></label></th>"):a.radio?t.push("<th data-index="+a._index+"><label class='flyer-table-radio'><input name='"+a.field+"' type='radio'/><i></i></label></th>"):t.push("<th data-index="+a._index+">"+a.title+"</th>"))}return t.join("")},initBody:function(){for(var t=[],e=0,i=this.options.data,n=i.length;e<n;e++){var s=[];t.push("<tr data-index='"+e+"'>");for(var a=0,r=this.options.columns,o=r.length;a<o;a++){var l=r[a];l.visible&&(l.checkbox?t.push("<td data-index="+l._index+">"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):"<label class='flyer-table-checkbox'><input name='"+l.field+"' type='checkbox'/><i></i></label>")+"</td>"):l.radio?t.push("<td data-index="+l._index+">"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):"<label class='flyer-table-radio'><input name='"+l.field+"' type='radio'/><i></i></label>")+"</td>"):s.push("<td>"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):i[e][l.field])+"</td>"))}t.push(s.join("")),t.push("</tr>")}return t.join("")},setData:function(t){this.options.data=t},getDatas:function(){return this.options.data},insertData:function(t){this.getDatas().push(t)},initFooter:function(){},initEvents:function(){var t=this;this.checkAll(),this.$body.find("tr").on("dblclick",function(e){var i=$(this).data("index"),n=t.getDatas(),s=n[i];t.options.rowdblClick.call(this,i,s,n,e)}),this.$body.find("tr").on("click",function(e){var i=$(this).data("index"),n=t.getDatas(),s=n[i];t.options.rowClick.call(this,i,s,n,e)}),t.$body.find(".flyer-table-checkbox").on("click",function(t){flyer.stop(t)})},checkAll:function(){var t=this;t.$header.find("input[type='checkbox']").on("click",function(e){var i=this;t.selector.find("input[name='"+i.name+"']").each(function(){this.checked=i.checked}),flyer.stop(e)})},columnResizer:function(t){var e=this,i=this.selector.find(".flyer-grips .flyer-grips-resizer"),n=this.selector.find(".flyer-table"),s=n.offset().left,a=n.width();e.ismove=!1,i.bind("mousedown",function(t){document.body.onselectstart=function(){return!1},e.ismove=!0,e.rgripElm=$(this),e.rgripElmLeft=parseInt(e.rgripElm.css("left"),0)||0,e.rgripNext=e.rgripElm.next(),e.rgripPrev=e.rgripElm.prev(),e.rgripNextLeft=parseInt(e.rgripNext.css("left"),0)||0,e.rgripPrevLeft=parseInt(e.rgripPrev.css("left"),0)||0,e.rgripTh=e.$header.find("th[data-index='"+e.rgripElm.data("index")+"']"),e.rgripNextTh=e.rgripTh.next(),e.rgripPrevTh=e.rgripTh.prev(),e.rgripElm.addClass("flyer-grips-drag"),n.addClass("user-select-none")}),$(document).mousemove(function(t){if(e.ismove){var i=e.rgripElm.get(0).offsetWidth+t.clientX-s;i<0?i=0:i>a?i=a:i>e.rgripNextLeft?i=e.rgripNextLeft:i<e.rgripPrevLeft&&(i=e.rgripPrevLeft),e.rgripElm.css("left",i)}}),$(document).mouseup(function(t){if(document.body.onselectstart=function(){return!0},e.ismove){e.ismove=!1,e.dragWidth=e.rgripElmLeft-parseInt(e.rgripElm.css("left")),e.dragValue=parseInt(String(e.dragWidth).replace("-",""));var i=e.rgripTh.width();e.dragWidth<0?e.rgripTh.css("width",parseInt(i,0)+e.dragValue):e.dragWidth>0&&e.rgripTh.css("width",parseInt(i,0)-e.dragValue),e.rgripElm.removeClass("flyer-grips-drag"),n.removeClass("user-select-none"),e.initGrips()}})},initGrips:function(){var t=[],e=this.selector.find(".flyer-table-body table"),i=e.width(),n=e.height(),s=e.offset().left;t.push("<div class='flyer-grips' style='width:"+i+"px;'>"),this.$header.find("th").each(function(){var e=$(this),i=e.offset().left+e.width()-s;0===e.get(0).style.width.length&&e.css("width",e.width()),t.push("<div style='left:"+i+"px;height:"+n+"px' data-index='"+e.data("index")+"' class='flyer-grips-resizer'></div>")}),t.push("</div>"),this.selector.find(".flyer-table-resizer").html(t.join("")),this.columnResizer()}},new i(t,e)}),flyer.extend("tree",function(t,e){var i=function(t,e){return this.init(t,e)},n=["flyer-tree","flyer-tree-root","fa-caret-right","fa-caret-down","fa-folder-o","fa-folder-open-o","flyer-tree-show","flyer-tree-node"];return i.DEFAULTS={data:[],url:"",skin:"",click:function(){return!1}},i.DEFAULTS_DATA={name:"Tree",spread:!1,href:"",target:"_blank",childrens:[]},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=t,this.template(),this.events(),this.__index=""},template:function(){var t=['<div class="'+n[0]+'">',this.recursion(this.options.data,!0,""),"</div>"];this.selector.append(t.join(""))},recursion:function(t,e,n){for(var s,a=['<ul class="flyer-tree-node '+(e?"flyer-tree-show":"")+'">'],r=0,o=t.length;r<o;r++)s=String(n).length>0?n+"."+r:r,t[r]=$.extend({},!0,i.DEFAULTS_DATA,t[r]),a.push("<li>"),a.push('<i class="fa '+(t[r].childrens.length>0?t[r].spread?"fa-caret-down":"fa-caret-right":"")+'"></i>'),a.push('<i class="fa '+(t[r].childrens.length>0?t[r].spread?"fa-folder-open-o":"fa-folder-o":"fa-file-o")+'"></i>'),a.push('<a _index="'+s+'"'+(t[r].href.length>0?'href="'+t[r].href+'" target="'+t[r].target+'"':"")+">"+t[r].name+"</a>"),t[r].childrens.length>0&&a.push(this.recursion(t[r].childrens,t[r].spread,s)),a.push("</li>");return a.push("</ul>"),a.join("")},changeIcon:function(t,e){var i=$(t).parent().find("i");e?(i.eq(0).removeClass(n[2]).addClass(n[3]),i.eq(1).removeClass(n[4]).addClass(n[5])):(i.eq(0).removeClass(n[3]).addClass(n[2]),i.eq(1).removeClass(n[5]).addClass(n[4]))},events:function(){var t=this,e=[".flyer-tree",".fa-caret-right",".fa-folder-o",".fa-folder-open-o",".fa-caret-down"];this.selector.find(e[0]).off("click",e.splice(1,4)),this.selector.find(e[0]).on("click",e.splice(1,4),function(e){var i=$(e.target).nextAll("."+n[7]);i.length>0&&(i.hasClass(n[6])?(i.removeClass(n[6]),t.changeIcon(e.target,!1)):(i.addClass(n[6]),t.changeIcon(e.target,!0))),flyer.stop(e)}),this.selector.find(e[0]).off("click","a"),this.selector.find(e[0]).on("click","a",function(e){t.options.click.call(this,e.target,t.getData(e.target.getAttribute("_index")))})},getData:function(t){for(var e=String(t).split("."),i=this.options.data[e[0]],n=1,s=e.length;n<s;n++)i=i.childrens[e[n]];return i}},new i(t,e)}),flyer.extend("upload",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={elem:"flyer-upload-file",text:"",url:"",method:"post",enctype:"multipart/form-data",ext:"",name:"avatar",uploadBefore:function(){return!0},success:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=t,this.template(),this.events(),this.buildFrame(),this.checkInput()},template:function(){var t=this.options,e=['<div class="flyer-upload">','<form action="'+t.url+'" enctype="'+t.enctype+'" target="flyer_upload_iframe" method="'+t.method+'">',"</form>",'<button class="flyer-btn flyer-btn-default">','<i class="fa fa-plus-square-o"></i>',"<span>"+this.options.text+"</span>","</button>","</div>"];this.selector.wrap(e.join("")),this.$form=this.selector.parent(),this.$upload=this.$form.parent(),this.$submit=this.$upload.find(".flyer-btn"),this.buildFrame()},buildFrame:function(){0==$("#flyer_upload_iframe").length&&$("body").append('<iframe id="flyer_upload_iframe"  name="flyer_upload_iframe"></iframe>')},checkInput:function(){this.selector.attr("name")||this.selector.attr("name",this.options.name)},events:function(){var t=this,e=t.options;this.$submit.on("click",function(){t.selector.click()}),t.selector.on("change",function(){if("function"==typeof e.uploadBefore&&!1===e.uploadBefore.call(this,t.selector))return!1;t.$form.submit();var i=$("#flyer_upload_iframe"),n=setInterval(function(){var s;try{s=i.contents().find("body").text()}catch(t){console.info("错误信息:"+t),clearInterval(n)}if(s){clearInterval(n),i.contents().find("body").html("");try{s=JSON.parse(s)}catch(t){return console.log(JSON.stringify(s)),s={},flyer.msg("请对上传接口返回JSON字符:"+t)}"function"==typeof e.success&&e.success(s,t.selector)}},50)}),this.selector.val("")}},new i(t,e)});