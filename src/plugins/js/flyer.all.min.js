"use strict";!function(t,e,i){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?i(t,!0):function(t){if(!t.document)throw new Error("The plug-in needs to be on the support document rendering environment.");if(!e)throw new Error("The plug-in needs to be on the support jQuery rendering environment.");return i(t)}:i(t,e)}("undefined"!=typeof window?window:this,jQuery,function(n,t,e){var i=function(){this.vision="0.1.3"},s=n,a=Array.prototype.slice,r=s.location,o=i.fn=i.prototype={format:function(){var t=a.call(arguments),e=t.length;if(0<e){for(var i=1,n=t[0];i<e;i++)n=n.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return n}return this},formatDate:function(t,e){return"string"!=typeof t?(flyer.log("error","format is not defined."),!1):(e=this.getDate(e),t.replace(/yyyy/gi,e.year).replace(/mm/,this.fullTime(e.month)).replace(/dd/gi,this.fullTime(e.day)).replace(/hh/gi,this.fullTime(e.hours)).replace(/MM/,this.fullTime(e.minutes)).replace(/ss/gi,this.fullTime(e.seconds)))},getDate:function(t){return{year:(t=this.isString(t)?new Date(t):t||new Date).getFullYear(),month:t.getMonth()+1,day:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds()}},fullTime:function(t){return 10<=t?t:"0"+t},getQueryString:function(t){var e=new RegExp(t+"=([^&|#?]+)"),i=r.href.substring(r.href.indexOf("?")+1).match(e);return null!==i?n.unescape(i[1]):null},escapeHTML:function(t){return"string"==typeof t&&0<t.length?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>"):t},unescapeHTML:function(t){return"string"==typeof t&&0<t.length?t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/<br\/>/g,"\n"):t},today:function(){return(new Date).toISOString().replace(/T.+/,"")},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},stop:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getFnName:function(t){return/^[\s\(]*function(?:\s+([\w$_][\w\d$_]*))?\(/.exec(t.toString())[1]||""},isEmpty:function(t){return!(0<[null,"undefined",void 0,"N/A","0",0,"null",!1,"false"].indexOf(t))},isObject:function(t){return"object"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:function(t){return t instanceof Array},isString:function(t){return"string"==typeof t},isjQuery:function(t){return t instanceof jQuery},isUndefined:function(t){return void 0===t},log:function(t,e){var i=a.call(arguments);1===i.length?(e=t,console.log(e)):1<i.length&&console[t](e)}};o.extend=function(t,e){o[t]=e},o.define=function(t,e){var i,n={};if(o.isObject(t)?e=t:o.isFunction(t)&&(e=t),o.isFunction(e)&&(o.exports[t]=o.exports[t]||{},e=e.call(this,o.exports[t],o.exports)),o.isString(t)){for(i in e)n[i]=e[i];this[t]=n}else for(i in e)this[i]=e[i];return this},o.exports={},n.flyer=new i}),function(i,n){for(var t in n)!function(e,t){i.fn[e]=function(t){return this.each(function(){return n[e](this,t)})}}(t)}(jQuery,flyer),flyer.extend("codes",function(t,e){var i=function(t,e){var i=this;1<t.length?t.each(function(){i.init($(this),e)}):i.init(t,e)};return i.DEFAULTS={tagName:"pre",title:"Code",height:"auto",encode:!0,about:!0},i.prototype={init:function(t,e){this[0]=t,this.options=$.extend(!0,{},i.DEFAULTS,e),this[0].replaceWith(this.template())},template:function(){return["<"+this.options.tagName+' class="codes">',"<h1>",this.options.title,this.options.about?'<a href="#">flyer.code</a>':"","</h1>","<ol>",this.adornContent(),"</ol>","</"+this.options.tagName+">"].join("")},adornContent:function(){for(var t=this[0].html(),e=[],i=0,n=(t=t?t.split("\n"):"").length;i<n;i++)this.options.encode&&(t[i]=flyer.escapeHTML(t[i])),e.push("<li>"+t[i]+"</li>");return e.join("")}},new i(t,e)}),flyer.extend("combobox",function(t,e){var o=["flyer-combobox","flyer-combobox-contents","filter-options","fa-angle-down","flyer-combobox-items","flyer-combobox-search","fa-search","selected","open","fa-angle-down","fa-angle-up","flyer-disabled"],i=(document.body,document,location,null),n=(window,function(t,e){return this.init(t,e)});return n.DEFAULTS={isMulti:!0,disabled:!1,allowSearch:!0,multipleSeparator:";",fieldKey:"value",required:!0,name:"comboBox",fieldValue:"text",fieldValuePY:"valuePY",fieldValuePY:"",placeholder:"placeholder",searchPlaceholder:"搜索内容...",url:"",data:[],selectAll:!0,allowSelectAll:!0,allText:"All",allValue:"-1",defaultValue:"",fnDataProcessing:function(){this.data=this.data.rows},fnSelected:function(){return!1},fnBeforeSelected:function(){},fnAfterSelected:function(){}},n.prototype={init:function(t,e){this.options=$.extend(!0,{},n.DEFAULTS,e),this.selector=t,this[0]=$(t),this._data={},this._filterData=[],this.requestData()},template:function(){var t=this.options,e=['<div class="flyer-combobox">','<div class="flyer-combobox-contents">','<input type="text" class="filter-options '+(!0===t.disabled?o[11]:"")+'" name="'+t.name+'" required="'+t.required+'" placeholder='+t.placeholder+' readonly="readonly" /><i class="fa fa-angle-down"></i>',"</div>",'<div class="flyer-combobox-items">',t.allowSearch?'<div class="flyer-combobox-search"><input placeholder="'+t.searchPlaceholder+'" type="text"><i class="fa fa-search"></i></div>':"","<ul>",this.allowAllItem()?"<li data-index='-1' data-key='"+t.allValue+"' data-value='"+window.escape(t.allText)+"'><div>"+t.allText+"</div></li>":"",this.readerItems(),"</ul>","</div>","</div>"];this.isSelectHtml()?(this[0]=this[0].parent(),this[0].append(e.join(""))):this[0].html(e.join("")),this.$itemContainer=this[0].find("."+o[4]),this.$contents=this[0].find("."+o[1]),this.$items=this.$itemContainer.find("li"),this.$search=this[0].find("."+o[5]),this.$filterOptions=this.$contents.find("."+o[2]).eq(0),this.initDefaultValue()},readerItems:function(){for(var t=[],e=this.options,i=0<this._filterData.length?this._filterData:e.data,n=0,s=i.length;n<s;n++)t.push("<li data-index="+n+" data-key="+i[n][e.fieldKey]+" data-value="+window.escape(i[n][e.fieldValue])+"><div>"+i[n][e.fieldValue]+"</div></li>");return t.join("")},requestData:function(){var e=this,i=this.options;0===(0<this._filterData.length?this._filterData:i.data).length&&0<i.url.length?$.getJSON(this.options.url,function(t){e.options.data=t,i.fnDataProcessing(),e.template(),e.initEvents()}):(this.isSelectHtml()&&e.readHtmlToData(),e.template(),e.initEvents())},isSelectHtml:function(){return"SELECT"===this[0].prop("tagName")},readHtmlToData:function(){var t=this[0].get(0),e=t.children;if(t){t.style.display="none";for(var i=0,n=e.length;i<n;i++){for(var s={},a=0,r=e[i].attributes,o=r.length;a<o;a++)-1<r[a].name.indexOf("data-")&&(s[r[a].name.replace("data-","")]=r[a].value);s[this.options.fieldValue]=e[i].text,this.options.data.push(s)}}},initEvents:function(){var s=this,a=s.options;if(!0===a.disabled)return!1;s.$contents.off("click").on("click",function(t){s.$itemContainer.hasClass(o[8])?s.hideItems.call(s):($("."+o[4]).removeClass(o[8]),s.$itemContainer.addClass(o[8]),s.$contents.find("i").removeClass(o[9]).addClass(o[10])),flyer.stop(t)}),s.$search.find("input").off("keyup").on("keyup",function(t){var e=this;i&&clearTimeout(i),i=setTimeout(function(){s.filterData(e.value)},500)}),s.$items.each(function(){$(this).off("click").on("click",function(t){var e=$(this),i=!!e.hasClass(o[7]),n={fieldKey:e.data("key"),fieldValue:window.unescape(e.data("value"))};"-1"==n.fieldKey&&n.fieldValue==a.allValue?s.empty():s.unselectAll(),s.showSelectedItem(n,i),a.fnSelected.call(s,n,this,s._data),a.isMulti||(s.hideItems.call(s),s.$items.removeClass(o[7])),i?e.removeClass(o[7]):e.addClass(o[7]),s.allowAllItem()&&s.checkSelectAll(),flyer.stop(t)})}),$(document).on("click",function(t){$(t.target.parentElement).hasClass(o[5])||(s.hideItems(),flyer.stop(t))})},allowAllItem:function(){var t=this.options;return t.selectAll&&t.isMulti&&1<t.data.length},showSelectedItem:function(t,e){var i=this.options,n=this.$filterOptions.data("key")||"",s=this.$filterOptions.val()||"";s=i.isMulti?e?(n=String(n).replace(t.fieldKey+i.multipleSeparator,""),s.replace(t.fieldValue+i.multipleSeparator,"")):(n=String(n)+t.fieldKey+i.multipleSeparator,s+t.fieldValue+i.multipleSeparator):(n=t.fieldKey,t.fieldValue),this.$filterOptions.val(s),this.$filterOptions.data("key",n),this._data={fieldKey:n,fieldValue:s}},selectAllItems:function(t){var i=this,e=(this.options,$(t));"select"===e.attr("all")?(this.$items.removeClass(o[7]),e.attr("all","unselect"),i.empty()):(this.$items.each(function(){var t=$(this),e={fieldKey:t.data("key"),fieldValue:window.unescape(t.data("value"))};t.addClass(o[7]),"-1"!==e.fieldKey&&i.showSelectedItem(e)}),e.attr("all","select"))},unselectAll:function(){var t=this.$itemContainer.find("[data-index='-1']");t.hasClass(o[7])&&(t.removeClass(o[7]),t.attr("all","select"),this.empty())},checkSelectAll:function(){var t=this.$itemContainer.find("."+o[7]).length,e=this.$itemContainer.find("[data-index='-1']");t===this.options.data.length&&(this.empty(),e.click())},hideItems:function(){this.$itemContainer.removeClass(o[8]),this.$contents.find("i").removeClass(o[10]).addClass(o[9])},filterData:function(e){var t=this.options.data,i=this,n=t.filter(function(t){return 0<=t[i.options.fieldValuePY||i.options.fieldValue].toLowerCase().indexOf(e.toLowerCase())});i._filterData=n,i.$itemContainer.find("ul").remove(),i.$itemContainer.append("<ul>"+i.readerItems()+"</ul>"),i.$items=this.$itemContainer.find("li"),i.initEvents()},getSelectedData:function(){return this._data},getSelectedValue:function(){return this.clearLastSeparator(this._data.fieldKey)},getSelectedText:function(){return this.clearLastSeparator(this._data.fieldValue)},clearLastSeparator:function(t){var e=(t=String(t)).lastIndexOf(this.options.multipleSeparator);return e+1===t.length?t.substring(0,e):t},setValue:function(t){var e=this.$itemContainer.find("[data-key='"+t.fieldKey+"']");this._data={fieldKey:t.fieldKey,fieldValue:t.fieldValue||window.unescape(e.data("value"))},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),e.addClass(o[7])},setValues:function(t){for(var e="",i="",n=this.options,s=0,a=t.length;s<a;s++){var r=this.$itemContainer.find("[data-key='"+t[s].fieldKey+"']");e=e+t[s].fieldKey+n.multipleSeparator,i=i+(t[s].fieldValue||window.unescape(r.data("value")))+n.multipleSeparator,r.addClass(o[7])}this._data={fieldKey:e,fieldValue:i},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue())},empty:function(){this._data={fieldKey:"",fieldValue:""},this.options.defaultValue="",this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),this.$items.removeClass(o[7])},initDefaultValue:function(){var t=this.options.defaultValue;flyer.isString(t)&&0<t.length&&this.setValue({fieldKey:t})},setData:function(t){this.options.data=t},reload:function(){this.requestData(),this.initDefaultValue()}},new n(t,e)}),flyer.define("cookie",function(){function n(t){return"string"==typeof t}return{set:function(t,e){if(n(t)){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=t+"="+window.escape(e)+";expires="+i.toGMTString()}},get:function(t){if(n(t)){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(i))?e[2]:null}},remove:function(t){if(n(t)){var e=new Date;e.setTime(e.getTime()-1);var i=this.get(t);null!==i&&(document.cookie=t+"="+i+";expires="+e.toGMTString())}}}}),flyer.extend("date",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={minDate:"1977-01-01",maxDate:"2099-12-31",startDate:new Date,isSure:!0,isClear:!0,isToday:!0,isTime:!0,festival:!0,format:"yyyy-mm-dd HH:MM:SS",isPrecision:!1,click:function(){return!1},choose:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=this.isJQuery(t)?t:$(t),this._date=this.getYMD(this.selector.val().replace(/-/gi,"/")),this.hasDirtyElm(),this.initEvent()},hasDirtyElm:function(){var t=$("#flyer-date-"+this.selector.attr("id"));0<t.length&&t.remove()},refresh:function(){this.template(),this.events(),this.isPickerBtnStatus()},i18n:{},template:function(){var t=this._date,e=this.options,i=['<div class="flyer-date" id="flyer-date-'+this.selector.attr("id")+'">','<div class="flyer-date-header">','<div class="flyer-date-year">','<button class="prev"></button>','<input type="text" class="flyer-year" value="'+t.year+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-yearMore">','<div class="prev-more"></div>','<div class="years">',this.initYears(),"</div>",'<div class="next-more"></div>',"</div>","</div>",'<div class="flyer-date-month">','<button class="prev"></button>','<input type="text" class="flyer-month" value="'+t.month+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-monthMore">',this.initMonths(),"</div>","</div>","</div>",'<div class="flyer-date-body">',"<table>","<thead>","<tr>","<th>日</th>","<th>一</th>","<th>二</th>","<th>三</th>","<th>四</th>","<th>五</th>","<th>六</th>","</tr>","</thead>","<tbody>",this.initDays(),"</tbody>","<tfoot></tfoot>","</table>","</div>",'<div class="flyer-date-footer">',e.isTime?this.initHMS():"",'<div class="flyer-date-btn">',e.isClear?'<button class="flyer-clear">清空</button>':"",e.isToday?'<button class="flyer-today">今天</button>':"",e.isSure?'<button class="flyer-confirm">确认</button>':"","</div>","</div>","</div>"];this.container?(i.splice(0,1),i.splice(i.length-1,1),this.container.html(i.join(""))):$("body").append(i.join("")),this.container=$("#flyer-date-"+this.selector.attr("id")),this.$header=this.container.find(".flyer-date-header"),this.$headerYear=this.$header.find(".flyer-date-year"),this.$headerMonth=this.$header.find(".flyer-date-month"),this.$body=this.container.find(".flyer-date-body"),this.$footer=this.container.find(".flyer-date-footer"),this.$footerTime=this.$footer.find(".flyer-date-time"),this.$footerBts=this.$footer.find(".flyer-date-btn")},initYears:function(t){for(var e=[],i=parseInt(t||this._date.year),n=i-4;n<i+8;n++)e.push("<span class='"+(this.isEffectiveDateForYear(n)?"":"flyer-dont-select")+"' month='"+n+"'>"+n+"</span>");return e.join("")},initMonths:function(){for(var t=[],e=1;e<=12;e++)t.push("<span class='"+(this.ifEffectiveDateForMonth(e)?"":"flyer-dont-select")+"' month='"+e+"'>"+this.justShowText(e)+"</span>");return t.join("")},initHMS:function(){return['<div class="flyer-date-time">',"<label>时间</label>",'<span class="hour">'+this._date.hours+"</span>:",'<span class="minute">'+this._date.minutes+"</span>:",'<span class="second">'+this._date.second+"</span>",this.initHours(),this.initMinutes(),this.initSeconds(),"</div>"].join("")},initDays:function(){for(var t=[],e=this.getStart(),i=(this.getEnd(),this._date),n=this.getMonthDays(i.month,i.year),s=!1,a=n+e,r=1,o=1,l=0;r<=a;r++)0==l&&t.push("<tr>"),l==e&&(s=!0),n<o&&(s=!1),s?(t.push("<td class='"+(o===parseInt(this._date.day)?"flyer-today ":"")+(this.isEffectiveDate(o)?"":"flyer-dont-select")+"'>"+o+"</td>"),o++):t.push("<td class='flyer-dont-select'>&nbsp;</td>"),7===++l&&(t.push("</tr>"),l=0);return t.join("")},isEffectiveDate:function(t,e,i){t=t||this._date.day,e=e||this._date.month,i=i||this._date.year;var n=new Date(this.precisionFormat(t,e,i)),s=new Date(this.minDate||this.options.minDate);return n<=new Date(this.maxDate||this.options.maxDate)&&s<=n},precisionFormat:function(t,e,i){var n=this._date.hours,s=this._date.minutes,a=this._date.second;return this.options.isPrecision?i+"/"+e+"/"+t+" "+n+":"+s+":"+a:i+"/"+e+"/"+t},isEffectiveDateForYear:function(t){var e=new Date(this.minDate||this.options.minDate);return t<=new Date(this.maxDate||this.options.maxDate).getFullYear()&&t>=e.getFullYear()},ifEffectiveDateForMonth:function(t){t=t||this._date.month;var e=this._date.year,i=new Date(e+"/"+t+"/01"),n=new Date(this.minDate||this.options.minDate),s=new Date(this.maxDate||this.options.maxDate),a=new Date(n.getFullYear()+"/"+(n.getMonth()+1)+"/01");return i<=new Date(s.getFullYear()+"/"+(s.getMonth()+1)+"/01")&&a<=i},isEffectiveForDate:function(t){var e=new Date(this.minDate||this.options.minDate),i=new Date(this.maxDate||this.options.maxDate),n=new Date(t);return n<=i&&e<=n},isPickerBtnStatus:function(){this.isEffectiveForDate(new Date)?this.$footerBts.find(".flyer-today").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-today").addClass("flyer-dont-select"),this.isEffectiveForDate(this.formatDate())?this.$footerBts.find(".flyer-confirm").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-confirm").addClass("flyer-dont-select")},initHours:function(){var i=this;return['<div class="flyer-date-hours">','<div class="flyer-date-minTool">小时<span>x</span></div>','<div class="flyer-hours">',function(){for(var t=[],e=1;e<24;e++)t.push("<span>"+i.justShowText(e)+"</span>");return t.join("")}(),"</div>","</div>"].join("")},initMinutes:function(){var i=this;return['<div class="flyer-date-minutes">','<div class="flyer-date-minTool">分钟<span>x</span></div>','<div class="flyer-minutes">',function(){for(var t=[],e=1;e<60;e++)t.push("<span>"+i.justShowText(e)+"</span>");return t.join("")}(),"</div>","</div>"].join("")},initSeconds:function(){var i=this;return['<div class="flyer-date-seconds">','<div class="flyer-date-minTool">秒数<span>x</span></div>','<div class="flyer-seconds">',function(){for(var t=[],e=1;e<60;e++)t.push("<span>"+i.justShowText(e)+"</span>");return t.join("")}(),"</div>","</div>"].join("")},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getYMD:function(t){var e=new Date(t||this.options.startDate);return{year:e.getFullYear(),month:this.justShowText(e.getMonth()+1),day:this.justShowText(e.getDate()),hours:this.justShowText(e.getHours()),minutes:this.justShowText(e.getMinutes()),second:this.justShowText(e.getSeconds())}},justShowText:function(t){return 10<=t?t:"0"+t},getMonthDays:function(t,e){switch(parseInt(t)){case 2:return this.isLeapYear(e)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},getDay:function(t){return new Date(t).getDay()},getStart:function(){var t=this._date;return this.getDay(t.year+"/"+t.month+"/01")},getEnd:function(){var t=this._date;return this.getDay(t.year+"/"+t.month+"/"+this.getMonthDays(t.month,t.year))},formatDate:function(){return this.options.format.replace(/yyyy/gi,this._date.year).replace(/mm/,this._date.month).replace(/dd/gi,this._date.day).replace(/hh/gi,this._date.hours).replace(/MM/,this._date.minutes).replace(/ss/gi,this._date.second)},close:function(){this.container.css({display:"none"})},closeAll:function(){$(".flyer-date").hide()},setMaxDate:function(t){this.maxDate=t},setMinDate:function(t){this.minDate=t},targetIsShow:function(t){t.hasClass("flyer-date-show")?t.removeClass("flyer-date-show"):t.addClass("flyer-date-show")},isJQuery:function(t){return t instanceof jQuery},initEvent:function(){var n=this;this.selector.on("click",function(t){n.closeAll(),n.refresh();var e=$("#flyer-date-"+n.selector.attr("id")),i=n.selector.offset();e.css({top:i.top+n.selector[0].offsetHeight+"px",left:i.left+"px",display:"block"}),flyer.stop(t)})},events:function(){var e=this;this.$headerYear.on("click",".more,.flyer-year",function(){var t=$(this).parent().find(".flyer-date-yearMore");e.targetIsShow(t)}),this.$headerMonth.on("click",".more,.flyer-month",function(){var t=$(this).parent().find(".flyer-date-monthMore");e.targetIsShow(t)}),this.$headerYear.on("click",".next,.prev",function(){var t=$(this).hasClass("next");e._date.year=t?parseInt(e._date.year)+1:parseInt(e._date.year)-1,e.refresh()}),this.$headerMonth.on("click",".next,.prev",function(){$(this).hasClass("next")?parseInt(e._date.month)<12&&(e._date.month=e.justShowText(parseInt(e._date.month)+1)):1<parseInt(e._date.month)&&(e._date.month=e.justShowText(parseInt(e._date.month)-1)),e.refresh()}),this.$headerMonth.on("click",".flyer-date-monthMore span:not([class='flyer-dont-select'])",function(){e._date.month=$(this).text(),e.refresh()}),this.$headerYear.on("click",".flyer-date-yearMore span:not([class='flyer-dont-select'])",function(){e._date.year=$(this).text(),e.refresh()}),this.$headerYear.on("click",".prev-more,.next-more",function(){$(this).hasClass("next-more")?e.$headerYear.find(".years").html(e.initYears(e.$headerYear.find(".flyer-date-yearMore span").last(0).text())):e.$headerYear.find(".years").html(e.initYears(e.$headerYear.find(".flyer-date-yearMore span").eq(0).text()))}),this.$body.find("td:not([class='flyer-dont-select'])").off("click"),this.$body.on("click","td:not([class='flyer-dont-select'])",function(){$(this).hasClass("flyer-dont-select")||(e._date.day=e.justShowText($(this).text()),e.options.click.call(this,e.formatDate(),e._date),e.selector.val(e.formatDate()),e.options.choose.call(this,e.formatDate(),e._date),e.close())}),this.$footerTime.on("click",".hour,.flyer-date-hours .flyer-date-minTool span",function(){var t=e.$footerTime.find(".flyer-date-hours");e.targetIsShow(t)}),this.$footerTime.on("click",".flyer-date-hours .flyer-hours span",function(){var t=e.$footerTime.find(".flyer-date-hours");e.targetIsShow(t),e.$footerTime.find(".hour").html($(this).text()),e._date.hours=$(this).text(),e.refresh()}),this.$footerTime.on("click",".minute,.flyer-date-minutes .flyer-date-minTool span",function(){var t=e.$footerTime.find(".flyer-date-minutes");e.targetIsShow(t)}),this.$footerTime.on("click",".flyer-date-minutes .flyer-minutes span",function(){var t=e.$footerTime.find(".flyer-date-minutes");e.targetIsShow(t),e.$footerTime.find(".minute").html($(this).text()),e._date.minutes=$(this).text(),e.refresh()}),this.$footerTime.on("click",".second,.flyer-date-seconds .flyer-date-minTool span",function(){var t=e.$footerTime.find(".flyer-date-seconds");e.targetIsShow(t)}),this.$footerTime.on("click",".flyer-date-seconds .flyer-seconds span",function(){var t=e.$footerTime.find(".flyer-date-seconds");e.targetIsShow(t),e.$footerTime.find(".second").html($(this).text()),e._date.second=$(this).text(),e.refresh()}),this.$footerBts.on("click",".flyer-clear",function(){e.selector.val(""),e._date=e.getYMD(),e.close()}),this.$footerBts.on("click",".flyer-today",function(){e._date=e.getYMD(new Date),e.options.click.call(this,e.formatDate(),e._date),e.selector.val(e.formatDate()),e.options.choose.call(this,e.formatDate(),e._date),e.close()}),this.$footerBts.on("click",".flyer-confirm",function(){e.options.click.call(this,e.formatDate(),e._date),e.selector.val(e.formatDate()),e.options.choose.call(this,e.formatDate(),e._date),e.close()}),$(this.container).on("click",function(t){flyer.stop(t)}),$(document).on("click",function(t){e.close()})}},new i(t,e)}),flyer.extend("demo",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e)}},new i(t,e)}),flyer.define(function(t,e){var s=["flyer-modal","flyer-dialog","flyer-dialog-title","flyer-dialog-toolbar","flyer-close","flyer-dialog-content","flyer-dialog-footer","flyer-btn","flyer-dialog-move"],n=(document.body,document,location,window,function(t){return this.init(t)});return n.DEFAULTS={container:"body",title:"",content:"",isMove:!0,timer:4e3,offset:"auto",fixed:!0,skin:"",area:[],btnAlign:"c",cancel:function(){return!1},showCancelBtn:!0,modalClose:!1,isModal:!1,autoClose:!0,pageUrl:"",anim:"bounceInDown",isOutAnim:!0,btns:[{text:"取消",skin:"",click:function(){this.close()}}],afterCreated:function(){}},n.prototype={init:function(t){this.index=(new Date).getTime(),this.options=$.extend(!0,{},n.DEFAULTS,t),this.$container=$(this.options.container),this.template(),this.bindEvents()},bindEvents:function(){var i=this,e=i.options;this.$title.on("mousedown",function(t){i.mousedown(t)}),$(document).mousemove(function(t){i.mousemove(t)}),$(document).mouseup(function(t){i.mouseup(t)}),this.$btnClose.on("click",function(t){e.cancel.call(this),i.close(),flyer.stop(t)});for(var t=0,n=e.btns,s=i.$btns,a=this.$btns.length;t<a;t++)!function(t,e){$(t).on("click",function(){e.click.call(i,t)})}(s[t],n[t])},template:function(){var t=this.options;this.selector=s[1]+this.index,this.modalSelector=s[0]+this.selector;var e=['<div id="'+this.modalSelector+'" class="'+s[0]+'"></div>','<div id="'+this.selector+'" class="'+s[1]+(0<t.skin.length?" "+t.skin:"")+(t.anim.length&&0<t.isOutAnim?" "+t.anim:"")+'">','<div class="'+s[2]+(t.isMove?" flyer-move":"")+'">',"<h4> ",t.title,"</h4>","</div>",'<div class="'+s[3]+'">',t.showCancelBtn?'<i class="'+s[4]+'">x</i>':"","</div>",'<div class="'+s[5]+'">',t.content,"</div>",'<div class="'+s[6]+'">',this.builderBtn(),"</div>","</div>"];t.isModal||e.splice(0,1),this.$container.append(e.join("")),this.$el=$("#"+this.selector),this.$title=this.$el.find("."+s[2]),this.$content=this.$el.find("."+s[5]),this.$footer=this.$el.find("."+s[6]),this.$toolbar=this.$el.find("."+s[3]),this.$btnClose=this.$el.find("."+s[4]),this.$btns=this.$footer.find("."+s[7]),this.$modal=$("#"+this.modalSelector),this.handtailor(),this.setOffset()},handtailor:function(){var t=this.options,e=this;switch(t.modalClose&&t.isModal&&e.$modal.on("click",function(){e.close()}),0===t.title.length&&this.$title.remove(),1<t.area.length&&this.$content.css({width:t.area[0],height:t.area[1]}),t.offset instanceof Array&&1<t.offset.length&&this.$el.css({top:t.offset[0],left:t.offset[1]}),t.fixed&&this.$el.css("position","fixed"),t.btnAlign){case"c":this.$footer.css("text-align","center");break;case"r":this.$footer.css("text-align","right");break;case"l":this.$footer.css("text-align","left")}},mousedown:function(t){var e=this.options;$("#"+this.selector).find("."+s[2]);this.isMove=void 0===e||void 0===e.isMove||e.isMove,this.isMove&&(this.offsetX=t.offsetX,this.offsetY=t.offsetY,this.$el.data("position",this.$el.css("position")),this.$el.css({position:"absolute",top:parseInt(this.$el.css("top"))+parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!1})},mousemove:function(t){if(this.isMove){var e=t.clientX-this.offsetX,i=t.clientY-this.offsetY+parseInt(this.getScrollTop());this.$el.css({top:i,left:e})}},mouseup:function(){this.isMove&&(this.isMove=!1,this.$el.css({position:this.$el.data("position"),top:parseInt(this.$el.css("top"))-parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!0})},builderBtn:function(){for(var t=this.options.btns,e=[],i=0,n=t.length;i<n;i++)e.push('<button class="'+s[7]+" "+t[i].skin+'">'+t[i].text+"</button>");return e.join("")},close:function(){this.$el.remove(),this.$modal.remove()},setOffset:function(){switch(this.options.offset){case"auto":var t=this.getOffset(this.$el.get(0));this.$el.css({top:String(t.y)+"px",left:String(t.x)+"px"})}},getScrollTop:function(){var t=document.documentElement.scrollTop;return 0===t&&(t=document.body.scrollTop),t},getOffset:function(t){try{var e="body",i=$(e).width(),n=window.screen.height;return{x:i/2-(void 0!==t?t.offsetWidth:0)/2,y:n/3-(void 0!==t?t.offsetHeight:0)/2,w:e.offsetWidth,h:e.clientHeight}}catch(t){}}},{alert:function(t,e){return(e=e||{}).content=t,e.title=e.title||"提示",e.skin=e.skin||"flyer-dialog-alert",new n(e)},confirm:function(t,e,i){return(i=$.extend({btns:[{text:"确定",skin:"flyer-btn-blue",click:function(t){this.close(),"function"==typeof e&&e.call(this,t,!0)}},{text:"取消",skin:"",click:function(t){this.close(),"function"==typeof e&&e.call(this,t,!1)}}]},i)).content=t,i.skin=i.skin||"flyer-dialog-confirm",new n(i)},open:function(t){t.skin=t.skin||"flyer-dialog-open";var e=new n(t);return 0<e.options.pageUrl.length?e.$content.load(e.options.pageUrl,function(){"function"==typeof t.afterCreated&&t.afterCreated(),e.setOffset()}):"function"==typeof t.afterCreated&&t.afterCreated(),e},msg:function(t,e){(e=e||{}).content=t,e.showCancelBtn=void 0!==e.showCancelBtn&&e.showCancelBtn,e.autoClose=void 0===e.autoClose||e.autoClose,e.anim=e.anim||"bounceIn",e.skin=e.skin||"flyer-dialog-msg";var i=new n(e);return i.$title.remove(),i.$footer.remove(),e.autoClose&&setTimeout(function(){i.close()},i.options.timer),i},tip:function(t,e){return(e=e||{}).skin=e.skin||"flyer-dialog-tip",e.anim=e.anim||"bounceInDown",e.offset=e.offset||[0,0],this.msg(t,e)},closeAll:function(t){if(void 0===t)$("."+s[1]).remove(),$("."+s[0]).remove();else switch(t){case"alert":$(".flyer-dialog-alert").remove();break;case"confirm":$(".flyer-dialog-confirm").remove();break;case"open":$(".flyer-dialog-open").remove();break;case"msg":$(".flyer-dialog-msg").remove();break;case"tip":$(".flyer-dialog-tip").remove()}}}}),flyer.extend("edit",function(t,e){var i=function(t,e){return this.init(t,e)};i.DEFAULTS={tools:[{name:"document",groups:["bold","italic","underline","strike","sub","super"]},{name:"typeset",groups:["left","center","right"]},{name:"insert",groups:["template","pagerclip"]}],minHeight:150,maxHeight:416,isResize:!1,resizeCallback:function(t){}};var l={bold:{index:"bold",template:'<i class="fa fa-bold bold" data-cmd="bold" title="字体加粗" aria-hidden="true"></i>'},italic:{index:"italic",template:'<i class="fa fa-italic italic" data-cmd="italic" title="引用斜体" aria-hidden="true"></i>'},underline:{index:"underline",template:'<i class="fa fa-underline underline" data-cmd="underline" title="字体下划线" aria-hidden="true"></i>'},strike:{index:"strike",template:'<i class="fa fa-strikethrough strike" data-cmd="strikeThrough" title="字体删除线" aria-hidden="true"></i>'},sub:{index:"sub",template:'<i class="fa fa-subscript sub" data-cmd="subscript" title="下标" name="mark" data-name="mark" aria-hidden="true"></i>'},super:{index:"super",template:'<i class="fa fa-superscript super" data-cmd="superscript" title="上标" name="mark" data-name="mark" aria-hidden="true"></i>'},ol:{index:"ol",template:'<i class="fa fa-list-ol ol" name="list" data-name="list" data-cmd="superscript" title="编号列表" aria-hidden="true"></i>'},ul:{index:"ul",template:'<i class="fa fa-list-ul ul" name="list" data-name="list" title="项目列表" aria-hidden="true"></i>'},left:{index:"left",template:'<i class="fa fa-align-left left" name="align" data-name="align" data-cmd="justifyLeft" title="左对齐" aria-hidden="true"></i>'},center:{index:"center",template:'<i class="fa fa-align-center center" name="align" data-name="align" data-cmd="justifyCenter" title="居中对齐" aria-hidden="true"></i>'},right:{index:"right",template:'<i class="fa fa-align-right right" name="align" data-name="align" data-cmd="justifyRight" title="右对齐" aria-hidden="true"></i>'},link:{index:"link",template:'<i class="fa fa-link link" title="添加链接" aria-hidden="true"></i>'},unlink:{index:"unlink",template:'<i class="fa fa-unlink unlink" title="清除链接" aria-hidden="true"></i>'},template:{index:"template",template:'<i class="fa fa-file-text template inActive" title="引用模板" aria-hidden="true"></i>'},pagerclip:{index:"pagerclip",template:'<i class="fa fa-paperclip pagerclip inActive" title="添加附件" aria-hidden="true"></i>'},img:{index:"img",template:'<i class="fa fa-image img inActive" title="引用图片" aria-hidden="true"></i>'},indent:{index:"indent",template:'<i class="fa fa-indent" data-cmd="indent" title="增加缩进量" aria-hidden="true"></i>'},outdent:{index:"outdent",template:'<i class="fa fa-outdent" data-cmd="outdent" title="减少缩进量" aria-hidden="true"></i>'}};return i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this[0]=t,this.parent=this[0].parent(),this.template(),this.initElms()},template:function(){this.options;var t=['<div class="flyer-edit">','<div class="flyer-edit-tool">',this.initTools(),"</div>",'<div class="flyer-edit-content">','<iframe class="flyer-edit-iframe"></iframe>',"</div>","</div>"];this.parent.append(t.join("")),this[0].hide()},elms:{},initEvents:function(){var d=this,t=this.options;this.elms.tools.each(function(t){$(this).on("click",function(){var t=$(this),e=t.data("cmd"),i=t.data("name");$("i[name='"+i+"']").not(this).removeClass("active"),t.hasClass("inActive")||(t.hasClass("active")?t.removeClass("active"):t.addClass("active")),d.command(e)})}),this.elms.editer.off("click").on("click",function(t){var e=t.target,i=$(e),n=i.parents(),s=[],a="flyer-edit-write",r=[];if(!i.hasClass(a)){s.push(e.tagName);for(var o=n.filter(function(t,e){return"BODY"!==e.tagName&&"HTML"!==e.tagName&&e.className!==a&&"DIV"!==e.tagName}),l=0,c=o.length;l<c;l++)s.push(o[l].tagName);0===(s=d.getCommands(s)).length&&(d.findElements(e,r),s=d.getCommands(r)),0<=s.length&&d.elms.container.find("i.active").removeClass("active"),d.lotCommand(s)}}),t.isResize&&this.onresize()},onresize:function(){var e=this,i=e.options;$("#resize").click(function(t){$(this).hasClass("fa-expand")?($(this).removeClass("fa-expand").addClass("fa-compress").attr("title","点击缩小"),e.elms.content.css("height",i.maxHeight),"function"==typeof i.resizeCallback&&i.resizeCallback(!0)):($(this).addClass("fa-expand").removeClass("fa-compress").attr("title","点击放大"),e.elms.content.css("height",i.minHeight),"function"==typeof i.resizeCallback&&i.resizeCallback(!1))})},findElements:function(t,e){e=flyer.isArray(e)?e:[],t.children&&0<t.children.length&&t.lastChild.tagName&&(e.push(t.lastChild.tagName),this.findElements(t.lastChild,e))},findDictionary:function(t){switch(t){case"B":return"bold";case"I":return"italic";case"U":return"underline";case"STRIKE":return"strike";case"SUP":return"super";case"SUB":return"sub";default:console.warn(t+" is not find in the dictionary.")}},getCommands:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=this.findDictionary(t[i]);s&&e.push(s)}return e},lotCommand:function(t){for(var e=0,i=t.length;e<i;e++){var n=this.elms.container.find("i."+t[e]),s=n.data("cmd");n.addClass("active"),this.command(s),this.command(s)}},command:function(t){if(t){this.elms.editer.focus();var e=this.elms.iframeWindow.document.execCommand(t);console.log(t+":"+e)}},initElms:function(){var t=this;this.elms.container=this.parent.find(".flyer-edit"),this.elms.content=this.parent.find(".flyer-edit-content"),this.elms.toolContainer=this.elms.container.find(".flyer-edit-tool"),this.elms.tools=this.elms.toolContainer.find("i.fa"),this.elms.iframe=this.elms.container.find("iframe"),this.elms.iframeWindow=this.elms.iframe[0].contentWindow,setTimeout(function(){t.elms.iframe.contents().find("head").append('<style>* {margin: 0px;padding: 0px;outline: 0px solid transparent; }body {  font-family:"Helvetica Neue", Helvetica, "PingFang SC", sans-serif;  font-size: 15px;  color: #333;  background-color: #fff;  margin: 10px; }a {  color: #0782C1; }ol, ul, dl {  *margin-right: 0px;  padding: 0 40px; }h1, h2, h3, h4, h5, h6 {  font-weight: normal;  line-height: 1.2; }hr {  border: 0px;  border-top: 1px solid #ccc; }.flyer-edit-write {  min-height: 100px;}::-webkit-scrollbar{ width: 6px; height: 6px;}::-webkit-scrollbar-thumb{    background-color: rgba(50,50,50,.3);    border-radius: 4px;}::-webkit-scrollbar-track{    background-color: rgba(50,50,50,.1);}.flyer-write-title{    font-size: 14px;    border-top: 1px dashed #ccc;    padding-top: 5px;    padding-bottom: 5px;    color: #888;}.flyer-write-html pre { white-space: pre-wrap; word-wrap: break-word;}.flyer-write-html{    margin-left: 10px;    line-height: 24px;    border-left: 1px solid #ccc;    padding-left: 10px;    color: #888;}</style>'),t.elms.iframe.contents().find("body").append("<div class='flyer-edit-write' style='min-height:100px;position:relative;' contenteditable='true'></div>"),t.elms.editer=$(t.elms.iframeWindow.document.getElementsByClassName("flyer-edit-write")[0]),t.initEvents()},0)},initTools:function(){for(var t=this.options,e=[],i=0,n=t.tools,s=n.length;i<s;i++){e.push("<span>");for(var a=0,r=n[i].groups,o=r.length;a<o;a++)l[r[a]]&&e.push(l[r[a]].template);e.push("</span>")}return t.isResize&&e.push('<i class="fa fa-expand" title="点击展开" id="resize" style="float:right;"></i>'),e.join("")},getContent:function(){return this.elms.editer.html()},getText:function(){var t=this.getContent();return t=(t=t.replace(/(<\/div>)|(<br>|<br\/>)/gi,"\n")).replace(/<[^>]+>/gi,"")},getFullText:function(){var t=this.elms.iframeWindow.document.getElementsByClassName("flyer-readyonly-html");return 0<t.length?this.getText()+$(t[0]).text():this.getText()},getFullContent:function(){var t=this.elms.iframeWindow.document.getElementsByClassName("flyer-readyonly-html");return 0<t.length?this.getContent()+t[0].innerHTML:this.getContent()},setContent:function(t){var e=this;setTimeout(function(){e.elms.editer.html(t)},1)},setReadonlyText:function(t){var e=this.elms.iframeWindow.document,i=e.createElement("div");i.className="flyer-readyonly-html",i.innerHTML+=t,e.body.appendChild(i)}},new i(t,e)}),flyer.extend("form",function(t,e,i){var n=function(t,e,i){return this.init(t,e,i)};return n.DEFAULTS={rules:{},messages:{},submit:".submit",isFormSumbit:!1,validBefore:function(){return!1}},n.prototype={init:function(t,e,i){this.options=$.extend(!0,{},n.DEFAULTS,e),this.formElm=t,this.formElm.attr("novalidate","true"),this.getValidData(),this.errorMsg={},this.initEvent(i)},initEvent:function(t){var i=this;$(this.formElm).find(this.options.submit).on("click",function(e){try{i.submit(e,t)}catch(t){console.error(t),e.preventDefault()}})},elements:function(){return $(this.formElm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled")},elementValue:function(t){var e=$(t);t.type;return this.checkable(t.type)?$(this.formElm).find("[name='"+t.name+"']").filter(":checked").val():e.val()},attributeRules:function(t){var e={};for(var i in this.methods){var n=t.getAttribute(i);n&&(e[i]=n)}return e},getValidData:function(){for(var t=0,e=this.elements(),i=this.options.rules,n=e.length;t<n;t++){var s=e[t].name,a=this.attributeRules(e[t]);0<s.length&&!this.isEmptyObject(a)&&(i[s]=a)}},formCheck:function(){this.getValidData();for(var t=0,e=this.elements(),i=(this.options.rules,e.length);t<i;t++){var n=e[t].name;if(!this.check(e[t]))return this.showError(n,e[t]),!1}return!0},getElementRulesByName:function(t){return this.options.rules[t]},check:function(t){var e=this.elementValue(t),i=t.name,n=this.getElementRulesByName(i),s=!0;for(var a in this.errorMsg[i]=[],n)this.methods[a].call(this,e,t,n[a])||(s=!1,this.errorMsg[i].push(this.defaultMessage(this.messages[a],n[a])));return s},format:function(i,t){return 1===arguments.length?function(){var t=$.makeArray(arguments);return t.unshift(i),$.validator.format.apply(this,t)}:(void 0===t||(2<arguments.length&&t.constructor!==Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),$.each(t,function(t,e){i=i.replace(new RegExp("\\{"+t+"\\}","g"),function(){return e})})),i)},messages:{required:"该项为必填项",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:"请输入一个长度最多是 {0} 的字符串",minlength:"请输入一个长度最少是 {0} 的字符串",rangelength:"请输入一个长度介于 {0} 和 {1} 之间的字符串",range:"请输入一个介于 {0} 和 {1} 之间的值",max:"请输入一个最大为 {0} 的值",min:"请输入一个最小为 {0} 的值"},defaultMessage:function(t,e){return/\$?\{(\d+)\}/g.test(t)&&(t=this.format(t,e)),t},addMethods:function(t,e,i){this.methods[t]=e,this.messages[t]=void 0!==i?i:this.message[t]},checkable:function(t){return/radio|checkbox/i.test(t.type)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},optional:function(t){var e=this.elementValue(t);return!this.methods.required.call(this,e,t)&&"dependency-mismatch"},findByName:function(t){return $(this.formElm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return $("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},methods:{required:function(t,e,i){if(!i)return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):0<t.length;var n=$(e).val();return n&&0<n.length},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},minlength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||i<=n},maxlength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n<=i},rangelength:function(t,e,i){var n=$.isArray(t)?t.length:this.getLength(t,e);return this.optional(e)||n>=i[0]&&n<=i[1]},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},step:function(t,e,i){},equalTo:function(t,e,i){return t===this.formElm.find("[name='"+i+"']").val()},remote:function(t,e,i,n){}},submit:function(t,e){this.options.validBefore.call(this),this.elements().removeClass("flyer-form-error"),this.formElm.find(".flyer-form-error").removeClass("flyer-form-error"),this.formCheck()?this.options.isFormSumbit?this.formElm.submit():("function"==typeof e&&e.call(this),t.preventDefault()):t.preventDefault()},showError:function(t,e){if(flyer&&flyer.msg){flyer.closeAll("msg");for(var i="",n=0,s=this.errorMsg[t],a=s.length;n<a;n++)i+=s[n]+"</br>";flyer.msg(i)}var r=$(e);r.hasClass("filter-options")?r.parent().addClass("flyer-form-error"):this.checkable(e)?/radio/i.test(e.type)?this.findByName(t).next().addClass("flyer-form-error"):this.findByName(t).parent().addClass("flyer-form-error"):r.addClass("flyer-form-error"),r.focus()},getData:function(){var t=[];t.push("{");for(var e=0,i=this.elements(),n=i.length;e<n;e++)t.push('"'+i[e].name+'":"'+this.elementValue(i[e])+'"'),e+1<n&&t.push(",");return t.push("}"),JSON.parse(t.join(""))}},new n(t,e,i)}),flyer.extend("page",function(t,e){function i(t,e){return this.init(t,e)}return i.DEFAULTS={ajax:{URL:null,data:null},data:[],curIndex:1,pageIndex:1,pageSize:5,prevText:"<i class='fa fa-caret-left'></i>",nextText:"<i class='fa fa-caret-right'></i>",totalNum:0,pagerLen:5,pageSum:0,isReload:!1,fnBeforeClick:function(){return!1},fnClick:function(){return!1},fnAfterClick:function(){return!1}},i.prototype={init:function(t,e){this.options=this.getOptions(e),this[0]=t,this.render()},render:function(){var t=this,e=t.options;e.ajax;if(e.pageSum=Math.ceil(e.totalNum/e.pageSize),e.pageSum<=0)return $(this[0]).empty(),t;e.pageSum<=e.pagerLen||e.pageSum-e.pagerLen==e.pageIndex?$(this[0]).html(t.simpleTemplate()):$(this[0]).html(t.template()),t.addEvent()},getOptions:function(t){return $.extend(!0,{},i.DEFAULTS,t)},reload:function(){this.render()},template:function(){var t='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',e=this.options,i=Math.floor((e.pagerLen-2)/2),n=e.curIndex<e.pagerLen?e.pageIndex:e.curIndex-i,s=e.curIndex<e.pagerLen?e.pagerLen:e.curIndex+i;for(i=0===i?1:i,e.curIndex+2*i>e.pageSum-1&&(n=e.pageSum-e.pagerLen,s=e.pageSum),t+='<li class="prev">'+e.prevText+"</li>",e.curIndex>=e.pagerLen&&(t+="<li>"+e.pageIndex+"</li>",t+='<li class="omit">...</li>');n<=s;n++)e.curIndex===n?t+='<li class="active">'+n+"</li>":t+="<li>"+n+"</li>";return e.curIndex+2*i<=e.pageSum-1&&(t+='<li class="omit">...</li>',t+="<li>"+e.pageSum+"</li>"),t+='<li class="next">'+e.nextText+"</li>",t+="</ul></div></div>"},simpleTemplate:function(){var t='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',e=this.options,i=e.pageIndex,n=e.pageSum;for(t+='<li class="prev">'+e.prevText+"</li>";i<=n;i++)e.curIndex===i?t+='<li class="active">'+i+"</li>":t+="<li>"+i+"</li>";return t+='<li class="next">'+e.nextText+"</li>",t+="</ul></div></div>"},addEvent:function(){var i=this,n=i.options,s=$(i[0]).find(".flyer-pager-view").find("li");s.each(function(){var e=$(this);e.hasClass("omit")||e.on("click",function(){if(e.hasClass("next")){if(n.curIndex>=n.pageSum)return this;n.curIndex++}else if(e.hasClass("prev")){if(n.curIndex<=n.pageIndex)return this;n.curIndex--}else n.curIndex=parseInt(e.text());if(n.curIndex<=n.pageSum){if(i.reload(),e.hasClass("next")||e.hasClass("prev")){var t=s.parent().find(".active");s.removeClass("active"),t.next().addClass("active")}else s.removeClass("active"),e.addClass("active");n.fnClick.call(i)}})})}},new i(t,e)}),flyer.extend("searches",function(t,e){function i(t,e){return this.init(t,e)}var r=["flyer-searches","keywords","flyer-seraches-input","fa fa-close","flyer-combobox-items","hover"];return i.DEFAULT={isMulti:!0,url:"",searchName:"",fieldValue:"",fieldName:"",requestData:[],spaceTime:1e3,separtor:";",distinck:!0,emptyMsg:"未检索到相关的数据..",fnDistinckTips:function(t,e){flyer.closeAll("msg"),flyer.msg("你已经选择了[ "+$(e).text()+" ]")},fnDataProcessing:function(){this._data=this._data.rows},fnSelected:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULT,e),this[0]=t,$(this[0]).html(this.template()),this.events()},template:function(){return['<div class="flyer-searches">','<div class="keywords"></div>','<input type="text" data-selected="" class="flyer-seraches-input" />','<div class="flyer-combobox-items">',"<ul>","</ul>","</div>","</div>"].join("")},requestData:function(t){var e=this,i=e.options,n={};"function"==typeof i.requestData?i.requestData.call(this,t):(n[i.searchName]=t,$.ajax({url:i.url,type:"get",data:n,success:function(t){e._data=t,i.fnDataProcessing.call(e,t),e.render(t),e.eventSelected()}}))},events:function(){var n=this,s=n.options,a=null;n.keyIndex=-1,n.$input=$(n[0]).find("."+r[2]),n.$keywords=$(n[0]).find("."+r[1]),n.$items=$(n[0]).find("."+r[4]).find("ul"),n.$input.on("keyup",function(t){a&&clearInterval(a);var e=$(this).val().trim();switch(t.keyCode){case 13:var i=n.$items.parent().css("display");return void(0<e.length&&"none"==i?n.requestData(e):(n.$items.find("."+r[5]).click(),n.$items.find("li").removeClass(r[5])));case 8:return n.$items.parent().hide(),0!=this.value.length?!1:void("del"==this.getAttribute("del")?setTimeout(function(){n.$keywords.find("span>i").last().click()},100):(this.setAttribute("del","del"),n.$keywords.find("span").last().css("border","1px solid #F7B824")));case 38:return void n.keyUp();case 40:return void n.keyDown();default:n.$items.parent().hide(),this.setAttribute("del",null),n.$keywords.find("span").last().css("border","inherit")}a=setTimeout(function(){0<e.length&&n.requestData(e)},s.spaceTime)}),$(document).on("click",function(t){n.$items.parent().hide(),flyer.stop(t)})},eventSelected:function(){var i=this,n=i.options;i.$items.find("li").on("click",function(){var t=$(this).data("key");if(n.distinck&&i.hasValue(t))return n.fnDistinckTips.call(i,t,this),!1;i.$keywords.append(i.insertSpan.call(this,n)),i.$items.parent().hide();var e=i.$input.data("selected")||"";i.$input.data("selected",e+t+";"),i.$input.val(""),i.eventDeleteSpan(),n.fnSelected.call(i,this),setTimeout(function(){i.$input.css("padding-left",i.$keywords.get(0).offsetWidth+10)},10),i.keyIndex=0})},insertSpan:function(t){return"<span data-key='"+$(this).data("key")+"'>"+$(this).text()+t.separtor+"<i class='"+r[3]+"'></i></span>"},eventDeleteSpan:function(){var e=this,i=this.$input,n=this.options;e.$keywords.find("span>i").on("click",function(){var t=e.$input.data("selected")||"";i.data("selected",t.replace($(this).parent().data("key")+n.separtor,"")),$(this).parent().remove(),e.$input.css("padding-left",e.$keywords.get(0).offsetWidth),i.attr("del",null),n.fnSelected.call(e,this)})},render:function(){var t=this._data,e=[],i=this.options;if(t&&0!=t.length)for(var n=0,s=t.length;n<s;n++)e.push("<li data-key='"+t[n][i.fieldValue]+"'><div>"+t[n][i.fieldName]+"</div></li>");else e.push("<li><div>"+i.emptyMsg+"</div></li>");this.$items.html(e.join("")),this.$items.parent().show()},keyUp:function(){var t=this,e=t.$items.find("li").length;t.$items.find("li").removeClass(r[5]),-1==t.keyIndex&&(t.keyIndex=e),t.keyIndex--,t.$items.find("li").eq(t.keyIndex).addClass(r[5])},keyDown:function(){var t=this,e=t.$items.find("li").length;t.$items.find("li").removeClass(r[5]),t.keyIndex++,t.keyIndex==e&&(t.keyIndex=0),t.$items.find("li").eq(t.keyIndex).addClass(r[5])},hasValue:function(t){var e=this.$input.data("selected");return new RegExp(t,"ig").test(e)},getSelectedData:function(){return{fieldValue:this.$input.data("selected"),fieldName:this.$keywords.find("span").text()}}},new i(t,e)}),flyer.define("store",function(){var n,e=/^[0-9A-Za-z_@-]*$/;function s(){return void 0===n&&(n=window.localStorage),!0}function a(t){return"string"==typeof t&&e.test(t)}return{set:function(t,e){var i=!1;if(a(t)&&s())try{e+="",n.setItem(t,e),i=!0}catch(t){}return i},get:function(t){if(a(t)&&s())try{return n.getItem(t)}catch(t){}return null},remove:function(t){if(a(t)&&s())try{return n.removeItem(t),!0}catch(t){}return!1},clear:function(){if(s()){try{for(var t in n)n.removeItem(t);return!0}catch(t){}return!1}}}}),flyer.extend("tab",function(t,e){function a(t,e){return this.init(t,e)}var o=["flyer-tab","flyer-tab-title","flyer-tab-content","flyer-tab-active","flyer-tab-item","active"];return a.DEFAULT={tabs:[{title:"tab1",content:"",url:"",cache:!1},{title:"tab2",content:"",url:"",cache:!1}],defaultIndex:0,skin:"flyer-tab-default",beforeClick:function(){return!1},click:function(){return!1},afetrClick:function(){return!1},beforeCreated:function(){return!1},afterCreated:function(){return!1}},a.prototype={init:function(t,e){this.options=$.extend(!0,{},a.DEFAULT,e),this[0]=t;var i=this.options,n=i.beforeCreated,s=i.afterCreated;n.call(this,i),this.hasTag(),this.haveTag||$(this[0]).html(this.template()),this.events(),s.call(this,i),this.$tabs.eq(i.defaultIndex).click()},hasTag:function(){0<$(this[0]).find("."+o[0]).length?this.haveTag=!0:this.haveTag=!1},template:function(){for(var t=this.options,e=[],i=[],n=['<div class="'+o[0]+(0<t.skin.length?" "+t.skin:"")+'">','<div class="'+o[1]+'">',"<ul>","</ul>","</div>",'<div class="'+o[2]+'">',"</div>","</div>"],s=0,a=t.tabs.length,r=t.tabs;s<a;s++)e.push("<li data-index='"+s+"'>"+r[s].title+"</li>"),i.push("<div class='"+o[4]+"'></div>");return n.splice(3,0,e.join("")),n.splice(7,0,i.join("")),n.join("")},events:function(){var i=this;this.options;i.$title=$(this[0]).find("."+o[1]),i.$content=$(this[0]).find("."+o[2]),i.$tabs=this.$title.find("li"),i.$tabs.on("click",function(){var t=$(this),e=$(this).data("index");i.$tabs.removeClass(o[3]),t.addClass(o[3]),i.haveTag?i.showContent(e):i.fullContent(e)})},fullContent:function(t){var e,i=this.options.tabs[t],n=(this.$content,this.$content.find("."+o[4])),s=n.eq(t),a=this,r=this.options;if(0===s.length)return!1;e=s.text(),n.removeClass(o[5]),i.content?i.cache&&0!==e.length||(s.html(i.content),r.click.call(a,t)):i.url&&(i.cache&&0!==e.length||s.load(i.url,function(){r.click.call(a,t)})),s.addClass(o[5])},showContent:function(t){var e=this.$content.find("."+o[4]),i=e.eq(t);if(0==i.length)return!1;e.removeClass(o[5]),i.addClass(o[5])}},new a(t,e)}),flyer.extend("table",function(t,e){var a=function(t,e){return this.init(t,e)};return a.DEFAULTS={columns:[],data:[],resizer:!1,width:"auto",height:"auto",fixedHeader:!0,rowdblClick:function(){},rowClick:function(){}},a.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,styles:{},className:void 0,sortable:!1,order:"asc",visible:!0,formatter:void 0,sorter:void 0,sortName:void 0},a.prototype={init:function(t,e){this.options=$.extend(!0,{},a.DEFAULTS,e),this.selector=t,this.template(),this.initHeaderThemes(),this.initEvents(),this.options.resizer&&this.initGrips()},reload:function(){this.template(),this.initHeaderThemes(),this.initEvents(),this.options.resizer&&this.initGrips()},template:function(){var t=['<div class="flyer-table" style="width:'+this.options.width+";height:"+this.options.height+'">','<div class="flyer-table-toolbar">',"</div>",'<div class="flyer-table-resizer">',"</div>",'<div class="flyer-table-body">',"<table>","<thead>",this.initHeader(),"</thead>","<tbody>",this.initBody(),"</tbody>","<tfoot>","</tfoot>","</table>","</div>",'<div class="flyer-table-page">',"</div>","</div>"];this.selector.html(t.join("")),this.$header=this.selector.find("thead"),this.$body=this.selector.find("tbody")},initHeaderThemes:function(){this.options;var i=this._flagColumns;this.$header.find("th").each(function(){var t=$(this),e=t.data("index");t.css(i[e].styles),t.addClass(i[e].className)})},initHeader:function(){var t=[];this._flagColumns={};for(var e=0,i=this.options.columns,n=i.length;e<n;e++){this.options.columns[e]=$.extend(!0,{},a.COLUMN_DEFAULTS,i[e]);var s=i[e];s._index=e,(this._flagColumns[e]=s).visible&&(s.checkbox?t.push("<th data-index="+s._index+"><label class='flyer-table-checkbox'><input name='"+s.field+"' type='checkbox'/><i></i></label></th>"):s.radio?t.push("<th data-index="+s._index+"><label class='flyer-table-radio'><input name='"+s.field+"' type='radio'/><i></i></label></th>"):t.push("<th data-index="+s._index+">"+s.title+"</th>"))}return t.join("")},initBody:function(){for(var t=[],e=0,i=this.options.data,n=i.length;e<n;e++){var s=[];t.push("<tr data-index='"+e+"'>");for(var a=0,r=this.options.columns,o=r.length;a<o;a++){var l=r[a];l.visible&&(l.checkbox?t.push("<td data-index="+l._index+">"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):"<label class='flyer-table-checkbox'><input name='"+l.field+"' type='checkbox'/><i></i></label>")+"</td>"):l.radio?t.push("<td data-index="+l._index+">"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):"<label class='flyer-table-radio'><input name='"+l.field+"' type='radio'/><i></i></label>")+"</td>"):s.push("<td>"+("function"==typeof l.formatter?l.formatter(i[e],i[e][l.field]):i[e][l.field])+"</td>"))}t.push(s.join("")),t.push("</tr>")}return t.join("")},setData:function(t){this.options.data=t},getDatas:function(){return this.options.data},insertData:function(t){this.getDatas().push(t)},initFooter:function(){},initEvents:function(){var s=this;this.checkAll(),this.$body.find("tr").on("dblclick",function(t){var e=$(this).data("index"),i=s.getDatas(),n=i[e];s.options.rowdblClick.call(this,e,n,i,t)}),this.$body.find("tr").on("click",function(t){var e=$(this).data("index"),i=s.getDatas(),n=i[e];s.options.rowClick.call(this,e,n,i,t)}),s.$body.find(".flyer-table-checkbox").on("click",function(t){flyer.stop(t)})},checkAll:function(){var i=this;i.$header.find("input[type='checkbox']").on("click",function(t){var e=this;i.selector.find("input[name='"+e.name+"']").each(function(){this.checked=e.checked}),flyer.stop(t)})},columnResizer:function(t){var i=this,e=this.selector.find(".flyer-grips .flyer-grips-resizer"),n=this.selector.find(".flyer-table"),s=n.offset().left,a=n.width();i.ismove=!1,e.bind("mousedown",function(t){document.body.onselectstart=function(){return!1},i.ismove=!0,i.rgripElm=$(this),i.rgripElmLeft=parseInt(i.rgripElm.css("left"),0)||0,i.rgripNext=i.rgripElm.next(),i.rgripPrev=i.rgripElm.prev(),i.rgripNextLeft=parseInt(i.rgripNext.css("left"),0)||0,i.rgripPrevLeft=parseInt(i.rgripPrev.css("left"),0)||0,i.rgripTh=i.$header.find("th[data-index='"+i.rgripElm.data("index")+"']"),i.rgripNextTh=i.rgripTh.next(),i.rgripPrevTh=i.rgripTh.prev(),i.rgripElm.addClass("flyer-grips-drag"),n.addClass("user-select-none")}),$(document).mousemove(function(t){if(i.ismove){var e=i.rgripElm.get(0).offsetWidth+t.clientX-s;e<0?e=0:a<e?e=a:e>i.rgripNextLeft?e=i.rgripNextLeft:e<i.rgripPrevLeft&&(e=i.rgripPrevLeft),i.rgripElm.css("left",e)}}),$(document).mouseup(function(t){if(document.body.onselectstart=function(){return!0},i.ismove){i.ismove=!1,i.dragWidth=i.rgripElmLeft-parseInt(i.rgripElm.css("left")),i.dragValue=parseInt(String(i.dragWidth).replace("-",""));var e=i.rgripTh.width();i.dragWidth<0?i.rgripTh.css("width",parseInt(e,0)+i.dragValue):0<i.dragWidth&&i.rgripTh.css("width",parseInt(e,0)-i.dragValue),i.rgripElm.removeClass("flyer-grips-drag"),n.removeClass("user-select-none"),i.initGrips()}})},initGrips:function(){var i=[],t=this.selector.find(".flyer-table-body table"),e=t.width(),n=t.height(),s=t.offset().left;i.push("<div class='flyer-grips' style='width:"+e+"px;'>"),this.$header.find("th").each(function(){var t=$(this),e=t.offset().left+t.width()-s;0===t.get(0).style.width.length&&t.css("width",t.width()),i.push("<div style='left:"+e+"px;height:"+n+"px' data-index='"+t.data("index")+"' class='flyer-grips-resizer'></div>")}),i.push("</div>"),this.selector.find(".flyer-table-resizer").html(i.join("")),this.columnResizer()}},new a(t,e)}),flyer.extend("tree",function(t,e){var o=function(t,e){return this.init(t,e)},n=["flyer-tree","flyer-tree-root","fa-caret-right","fa-caret-down","fa-folder-o","fa-folder-open-o","flyer-tree-show","flyer-tree-node"];return o.DEFAULTS={data:[],url:"",skin:"",click:function(){return!1}},o.DEFAULTS_DATA={name:"Tree",spread:!1,href:"",target:"_blank",childrens:[]},o.prototype={init:function(t,e){this.options=$.extend(!0,{},o.DEFAULTS,e),this.selector=t,this.template(),this.events(),this.__index=""},template:function(){var t=['<div class="'+n[0]+'">',this.recursion(this.options.data,!0,""),"</div>"];this.selector.append(t.join(""))},recursion:function(t,e,i){for(var n,s=['<ul class="flyer-tree-node '+(e?"flyer-tree-show":"")+'">'],a=0,r=t.length;a<r;a++)n=0<String(i).length?i+"."+a:a,t[a]=$.extend({},!0,o.DEFAULTS_DATA,t[a]),s.push("<li>"),s.push('<i class="fa '+(0<t[a].childrens.length?t[a].spread?"fa-caret-down":"fa-caret-right":"")+'"></i>'),s.push('<i class="fa '+(0<t[a].childrens.length?t[a].spread?"fa-folder-open-o":"fa-folder-o":"fa-file-o")+'"></i>'),s.push('<a _index="'+n+'"'+(0<t[a].href.length?'href="'+t[a].href+'" target="'+t[a].target+'"':"")+">"+t[a].name+"</a>"),0<t[a].childrens.length&&s.push(this.recursion(t[a].childrens,t[a].spread,n)),s.push("</li>");return s.push("</ul>"),s.join("")},changeIcon:function(t,e){var i=$(t).parent().find("i");e?(i.eq(0).removeClass(n[2]).addClass(n[3]),i.eq(1).removeClass(n[4]).addClass(n[5])):(i.eq(0).removeClass(n[3]).addClass(n[2]),i.eq(1).removeClass(n[5]).addClass(n[4]))},events:function(){var i=this,t=[".flyer-tree",".fa-caret-right",".fa-folder-o",".fa-folder-open-o",".fa-caret-down"];this.selector.find(t[0]).off("click",t.splice(1,4)),this.selector.find(t[0]).on("click",t.splice(1,4),function(t){var e=$(t.target).nextAll("."+n[7]);0<e.length&&(e.hasClass(n[6])?(e.removeClass(n[6]),i.changeIcon(t.target,!1)):(e.addClass(n[6]),i.changeIcon(t.target,!0))),flyer.stop(t)}),this.selector.find(t[0]).off("click","a"),this.selector.find(t[0]).on("click","a",function(t){i.options.click.call(this,t.target,i.getData(t.target.getAttribute("_index")))})},getData:function(t){for(var e=String(t).split("."),i=this.options.data[e[0]],n=1,s=e.length;n<s;n++)i=i.childrens[e[n]];return i}},new o(t,e)}),flyer.extend("upload",function(t,e){var i=function(t,e){return this.init(t,e)};return i.DEFAULTS={elem:"flyer-upload-file",text:"",url:"",method:"post",enctype:"multipart/form-data",ext:"",name:"avatar",uploadBefore:function(){return!0},success:function(){return!1}},i.prototype={init:function(t,e){this.options=$.extend(!0,{},i.DEFAULTS,e),this.selector=t,this.template(),this.events(),this.buildFrame(),this.checkInput()},template:function(){var t=this.options,e=['<div class="flyer-upload">','<form action="'+t.url+'" enctype="'+t.enctype+'" target="flyer_upload_iframe" method="'+t.method+'">',"</form>",'<button class="flyer-btn flyer-btn-default">','<i class="fa fa-plus-square-o"></i>',"<span>"+this.options.text+"</span>","</button>","</div>"];this.selector.wrap(e.join("")),this.$form=this.selector.parent(),this.$upload=this.$form.parent(),this.$submit=this.$upload.find(".flyer-btn"),this.buildFrame()},buildFrame:function(){0==$("#flyer_upload_iframe").length&&$("body").append('<iframe id="flyer_upload_iframe"  name="flyer_upload_iframe"></iframe>')},checkInput:function(){this.selector.attr("name")||this.selector.attr("name",this.options.name)},events:function(){var n=this,s=n.options;this.$submit.on("click",function(){n.selector.click()}),n.selector.on("change",function(){if("function"==typeof s.uploadBefore&&!1===s.uploadBefore.call(this,n.selector))return!1;n.$form.submit();var t=$("#flyer_upload_iframe"),i=setInterval(function(){var e;try{e=t.contents().find("body").text()}catch(t){console.info("错误信息:"+t),clearInterval(i)}if(e){clearInterval(i),t.contents().find("body").html("");try{e=JSON.parse(e)}catch(t){return console.log(JSON.stringify(e)),e={},flyer.msg("请对上传接口返回JSON字符:"+t)}"function"==typeof s.success&&s.success(e,n.selector)}},50)}),this.selector.val("")}},new i(t,e)});